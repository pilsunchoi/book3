
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>2.2 아청패널분석(2010 초4 패널) &#8212; 데이터 기반 사회과학 분석</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/022_아청패널분석(2010_e4)';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="2.3 아청패널분석(2010 종합)" href="023_%EC%95%84%EC%B2%AD%ED%8C%A8%EB%84%90%EB%B6%84%EC%84%9D%282010_%EC%A2%85%ED%95%A9%29.html" />
    <link rel="prev" title="2.1 다문화 배경이 학업성적에 미치는 영향" href="021_%EB%8B%A4%EB%AC%B8%ED%99%94_%EB%B0%B0%EA%B2%BD%EC%9D%B4_%ED%95%99%EC%97%85%EC%84%B1%EC%A0%81%EC%97%90_%EB%AF%B8%EC%B9%98%EB%8A%94_%EC%98%81%ED%96%A5.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="000_%EC%84%9C%EB%AC%B8.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="데이터 기반 사회과학 분석 - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="데이터 기반 사회과학 분석 - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="000_%EC%84%9C%EB%AC%B8.html">
                    시작하며
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="010_%EB%8B%A4%EB%AC%B8%ED%99%94%EC%B2%AD%EC%86%8C%EB%85%84_%ED%95%99%EC%97%85%EC%84%B1%EC%B7%A8%EB%8F%84_%EB%B6%84%EC%84%9D.html">1 다문화청소년 학업성취도 분석</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="011_%EB%8B%A4%EB%AC%B8%ED%99%94%EC%B2%AD%EC%86%8C%EB%85%84_%ED%95%99%EC%97%85%EC%84%B1%EC%B7%A8%EB%8F%84_%EC%9A%94%EC%9D%B8_%ED%83%90%EC%83%89.html">1.1 다문화청소년 학업성취도 요인 탐색</a></li>
<li class="toctree-l2"><a class="reference internal" href="012_%EB%8B%A4%EB%AC%B8%ED%99%94%EC%B2%AD%EC%86%8C%EB%85%84%ED%8C%A8%EB%84%90_%EB%8D%B0%EC%9D%B4%ED%84%B0.html">1.2 다문화청소년패널 데이터</a></li>
<li class="toctree-l2"><a class="reference internal" href="013_%ED%8C%A8%EB%84%90_%ED%9A%8C%EA%B7%80%EB%B6%84%EC%84%9D.html">1.3 패널 회귀분석</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="020_%EB%8B%A4%EB%AC%B8%ED%99%94_%EB%B0%B0%EA%B2%BD%EA%B3%BC_%ED%95%99%EC%97%85%EC%84%B1%EC%A0%81.html">2 다문화 배경과 학업성적</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="021_%EB%8B%A4%EB%AC%B8%ED%99%94_%EB%B0%B0%EA%B2%BD%EC%9D%B4_%ED%95%99%EC%97%85%EC%84%B1%EC%A0%81%EC%97%90_%EB%AF%B8%EC%B9%98%EB%8A%94_%EC%98%81%ED%96%A5.html">2.1 다문화 배경이 학업성적에 미치는 영향</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">2.2 아청패널분석(2010 초4 패널)</a></li>
<li class="toctree-l2"><a class="reference internal" href="023_%EC%95%84%EC%B2%AD%ED%8C%A8%EB%84%90%EB%B6%84%EC%84%9D%282010_%EC%A2%85%ED%95%A9%29.html">2.3 아청패널분석(2010 종합)</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="030_%ED%95%9C%EA%B5%AD_%EC%B2%AD%EB%85%84%EC%84%B8%EB%8C%80_%EC%9E%90%EC%82%B0%EB%B6%88%ED%8F%89%EB%93%B1_%EC%B6%94%EC%A0%95.html">3 한국 청년세대 자산불평등 추정</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="031_%EA%B0%80%EA%B3%84%EA%B8%88%EC%9C%B5%EC%A1%B0%EC%82%AC_%EC%A7%80%EB%8B%88%EA%B3%84%EC%88%98_%EA%B3%84%EC%82%B0.html">3.1 가계금융조사 지니계수 계산</a></li>
<li class="toctree-l2"><a class="reference internal" href="032_%EC%B2%AD%EB%85%84%EC%84%B8%EB%8C%80_%EC%A7%80%EB%8B%88%EA%B3%84%EC%88%98_%EC%B6%94%EC%9D%B4.html">3.2 청년세대 지니계수 추이</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="040_%EC%88%9C%EC%9E%90%EC%82%B0_%EB%B6%84%ED%8F%AC_%EC%B6%94%EC%A0%95.html">4 순자산 분포 추정</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="041_%EC%88%9C%EC%9E%90%EC%82%B0_%EB%B6%84%ED%8F%AC_%EC%B6%94%EC%A0%95_Johnson_SU_%EB%B6%84%ED%8F%AC_%ED%99%9C%EC%9A%A9.html">4.1 순자산 분포 추정: Johnson SU 분포 활용</a></li>
<li class="toctree-l2"><a class="reference internal" href="042_SU_Asset_Distribution.html">4.2 SU Asset Distribution</a></li>
<li class="toctree-l2"><a class="reference internal" href="043_MLE%EC%97%90%EC%84%9C_%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0_%EC%A0%9C%EC%95%BD%EC%A1%B0%EA%B1%B4_%EC%B2%98%EB%A6%AC%EB%B2%95.html">4.3 MLE에서 파라미터 제약조건 처리법</a></li>
<li class="toctree-l2"><a class="reference internal" href="044_MLE%EC%97%90%EC%84%9C_%EC%9E%90%EC%BD%94%EB%B9%84%EC%95%88_%EB%B0%8F_%ED%97%A4%EC%8B%9C%EC%95%88_%ED%99%9C%EC%9A%A9.html">4.4 MLE에서 헤시안 활용</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="050_%EB%82%98%EC%9D%B4%EB%B3%84_%EC%88%9C%EC%9E%90%EC%82%B0_%EB%B6%84%ED%8F%AC_%EC%B6%94%EC%A0%95.html">5 나이별 순자산 분포 추정</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="051_%EB%82%98%EC%9D%B4%EB%B3%84_%EC%88%9C%EC%9E%90%EC%82%B0_%EB%B6%84%ED%8F%AC_%EC%B6%94%EC%A0%95_SU_%EB%B6%84%ED%8F%AC_%ED%99%9C%EC%9A%A9.html">5.1 나이별 순자산 분포 추정: SU 분포 활용</a></li>
<li class="toctree-l2"><a class="reference internal" href="052_Bivariate_SU.html">5.2 Bivariate SU Distribution</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/pilsunchoi/book3" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/pilsunchoi/book3/issues/new?title=Issue%20on%20page%20%2Fnotebooks/022_아청패널분석(2010_e4).html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/notebooks/022_아청패널분석(2010_e4).ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>2.2 아청패널분석(2010 초4 패널)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">1 데이터</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">다문화청소년 패널 데이터 만들기</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#kcyps2010-4">KCYPS2010 초4 패널 데이터 불러들이기</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">설문조사 항목</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">2 관측 데이터 분석</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">성적 평균 변화 추이</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">성적 평균 변화 추이 그래프 그리기</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">3 패널 회귀분석</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">추정 모형</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">초4 패널 추정 작업</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pooled-ols">통합(pooled) OLS 모형</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">고정효과 모형</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">확률효과 모형</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stata-r">부록: Stata 및 R의 추정 결과</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stata">(1) Stata</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#r">(2) R</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="id1">
<h1>2.2 아청패널분석(2010 초4 패널)<a class="headerlink" href="#id1" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#1-%EB%8D%B0%EC%9D%B4%ED%84%B0"><span class="xref myst">1 데이터</span></a></p></li>
<li><p><a class="reference internal" href="#2-%EA%B4%80%EC%B8%A1-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%B6%84%EC%84%9D"><span class="xref myst">2 관측 데이터 분석</span></a></p></li>
<li><p><a class="reference internal" href="#3-%ED%8C%A8%EB%84%90-%ED%9A%8C%EA%B7%80%EB%B6%84%EC%84%9D"><span class="xref myst">3 패널 회귀분석</span></a></p></li>
<li><p><a class="reference internal" href="#%EB%B6%80%EB%A1%9D:-Stata-%EB%B0%8F-R%EC%9D%98-%EC%B6%94%EC%A0%95-%EA%B2%B0%EA%B3%BC"><span class="xref myst">부록: Stata 및 R의 추정 결과</span></a></p></li>
</ul>
<p>원래의 연구에서는 한국아동·청소년패널조사(KCYPS 2010)의 초1, 초4, 중1 패널 각각에 대해 다문화 배경이 학업성적에 미치는 영향을 분석했는데, 본 노트북에서는 그 중에서 <strong>초4 패널 분석만</strong> 살펴보기로 한다.</p>
<blockquote>
<div><p>원시(raw) 데이터는 한국청소년정책연구원에서 데이터를 <a class="reference external" href="https://www.nypi.re.kr/archive/mps/program/examinDataCode/dataDwloadAgreeView?menuId=MENU00226">다운로드</a> 받는다. 1차년도부터 7차년도까지의 데이터를 다운받아 이를 패널 데이터로 만드는 작업부터 시작해야 한다.(아래 첫 번째 명령문이 그것에 해당한다.)</p>
</div></blockquote>
<section id="id2">
<h2>1 데이터<a class="headerlink" href="#id2" title="Link to this heading">#</a></h2>
<p>한국청소년정책연구원이 생산하는 여러 조사 데이터 중 한국아동·청소년패널조사<a class="reference external" href="https://www.nypi.re.kr/archive/board?menuId=MENU00220">한국아동청소년패널조사</a>(KCYPS)는 아동·청소년들의 성장과 발달의 변화를 종합적으로 파악할 수 있는 패널 데이터이다. 본 연구에서 분석하는 “KCYPS 2010”은 2010년 기준 전국의 초등학교 1학년(2,342명)과 4학년(2,378명), 중학교 1학년(2,351명) 등 3개 코호트 총 7,071명의 청소년을 대상으로 2010년부터 2016년까지 7개년에 걸쳐 추적조사를 시행한 것이다.</p>
<p><img alt="한국아동청소년패널조사" src="https://raw.githubusercontent.com/pilsunchoi/images3/main/2-3.png" /></p>
<section id="id3">
<h3>다문화청소년 패널 데이터 만들기<a class="headerlink" href="#id3" title="Link to this heading">#</a></h3>
<p>원시(raw) 데이터를 사용해 분석을 시작하기를 원하는 독자들은 한국청소년정책연구원에서 데이터를 <a class="reference external" href="https://www.nypi.re.kr/archive/mps/program/examinDataCode/dataDwloadAgreeView?menuId=MENU00226">다운로드</a> 받아야 한다. 1차년도부터 7차년도까지의 데이터를 다운받아 이를 패널 데이터로 만드는 작업부터 시작해야 한다. 아래 명령문이 그것에 해당한다.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import pandas as pd
import os
import re

# 폴더 경로
base_folder = r&quot;C:\1.1 다문화\Data\KCYPS2010 e4[EXCEL]&quot;

# 패널 데이터를 만들기 위한 반복문
panel_data_list = []

for i in range(1, 8):  # 1차년도부터 7차년도까지
    file = os.path.join(base_folder, f&quot;KCYPS2010 e4w{i}.xlsx&quot;)

    # 파일 로딩 및 변수명에서 &quot;w{연차}&quot; 접미사 제거
    data = pd.read_excel(file).rename(
        columns=lambda x: re.sub(f&quot;w{i}$&quot;, &quot;&quot;, x) #$는 문자열의 끝을 나타냄
    )

    # 각 연차별 데이터프레임을 리스트에 추가
    panel_data_list.append(data)

# 모든 연차의 패널 데이터를 하나로 결합하여 &quot;panel_data&quot; 생성
panel_data = pd.concat(panel_data_list)

# 패널 데이터를 KCYPS2010 e4.csv 파일로 저장
panel_data.to_csv(&quot;..\Data\KCYPS2010 e4[EXCEL]\KCYPS2010 e4.csv&quot;, index=False)
</pre></div>
</div>
</section>
<section id="kcyps2010-4">
<h3>KCYPS2010 초4 패널 데이터 불러들이기<a class="headerlink" href="#kcyps2010-4" title="Link to this heading">#</a></h3>
<p><strong><code class="docutils literal notranslate"><span class="pre">KCYPS2010</span> <span class="pre">e4.csv</span></code> 불러오기</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">panel_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;..\Data\KCYPS2010 e4[EXCEL]\KCYPS2010 e4.csv&quot;</span><span class="p">)</span> 
<span class="n">panel_data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>SCLID</th>
      <th>PANEL</th>
      <th>WAVE</th>
      <th>SURVEY1</th>
      <th>SURVEY2</th>
      <th>WEIGHT1</th>
      <th>GENDER</th>
      <th>PARENT</th>
      <th>BRT1A</th>
      <th>...</th>
      <th>SCL1</th>
      <th>SCL2</th>
      <th>COEDU</th>
      <th>INCOME1</th>
      <th>MDA2D</th>
      <th>FUR1A01</th>
      <th>FUR1A02</th>
      <th>EDU2D06</th>
      <th>SCLTYP1</th>
      <th>INT1E</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>15202</td>
      <td>152.0</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>402.379162</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>2000.0</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>15203</td>
      <td>152.0</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>414.563121</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>2000.0</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>15204</td>
      <td>152.0</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>402.379162</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>2000.0</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>15205</td>
      <td>152.0</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>414.563121</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>2000.0</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>15206</td>
      <td>152.0</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>402.379162</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>2000.0</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>16641</th>
      <td>168529</td>
      <td>NaN</td>
      <td>2</td>
      <td>7</td>
      <td>2</td>
      <td>2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>16642</th>
      <td>168530</td>
      <td>1422.0</td>
      <td>2</td>
      <td>7</td>
      <td>1</td>
      <td>2</td>
      <td>127.617004</td>
      <td>1.0</td>
      <td>NaN</td>
      <td>2000.0</td>
      <td>...</td>
      <td>1.0</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>3.0</td>
      <td>1.0</td>
      <td>3.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>16643</th>
      <td>168531</td>
      <td>1428.0</td>
      <td>2</td>
      <td>7</td>
      <td>1</td>
      <td>1</td>
      <td>119.183870</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>2001.0</td>
      <td>...</td>
      <td>1.0</td>
      <td>NaN</td>
      <td>2.0</td>
      <td>3.0</td>
      <td>1.0</td>
      <td>3.0</td>
      <td>3.0</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>16644</th>
      <td>168532</td>
      <td>NaN</td>
      <td>2</td>
      <td>7</td>
      <td>2</td>
      <td>2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>16645</th>
      <td>168533</td>
      <td>1430.0</td>
      <td>2</td>
      <td>7</td>
      <td>1</td>
      <td>1</td>
      <td>119.183870</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>2000.0</td>
      <td>...</td>
      <td>1.0</td>
      <td>NaN</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>3.0</td>
      <td>4.0</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>2.0</td>
    </tr>
  </tbody>
</table>
<p>16646 rows × 1054 columns</p>
</div></div></div>
</div>
<p><br></br><strong>데이터 유형 확인</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># panel_data의 변수 별 데이터 유형 확인</span>
<span class="n">data_types</span> <span class="o">=</span> <span class="n">panel_data</span><span class="o">.</span><span class="n">dtypes</span>

<span class="c1"># 데이터 유형 종류 확인</span>
<span class="n">unique_data_types</span> <span class="o">=</span> <span class="n">data_types</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;panel_data의 변수 별 데이터 유형:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_types</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">panel_data에 있는 데이터 유형 종류:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">unique_data_types</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>panel_data의 변수 별 데이터 유형:
ID           int64
SCLID      float64
PANEL        int64
WAVE         int64
SURVEY1      int64
            ...   
FUR1A01    float64
FUR1A02    float64
EDU2D06    float64
SCLTYP1    float64
INT1E      float64
Length: 1054, dtype: object

panel_data에 있는 데이터 유형 종류:
[dtype(&#39;int64&#39;) dtype(&#39;float64&#39;)]
</pre></div>
</div>
</div>
</div>
<p><strong>무응답 이상치를 결측값으로 처리</strong></p>
<ul class="simple">
<li><p>무응답(-9), 이상치(-8) 등은 조사진이 결손치로 지정하였음</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;값이 -9인 경우의 수:&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">panel_data</span> <span class="o">==</span> <span class="o">-</span><span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;값이 -8인 경우의 수:&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">panel_data</span> <span class="o">==</span> <span class="o">-</span><span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>값이 -9인 경우의 수: 164706
값이 -8인 경우의 수: 11460
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># panel_data에서 값이 -9, -8 경우를 결측값으로 처리</span>
<span class="n">panel_data</span><span class="o">.</span><span class="n">replace</span><span class="p">([</span><span class="o">-</span><span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;값이 -9인 경우의 수:&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">panel_data</span> <span class="o">==</span> <span class="o">-</span><span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;값이 -8인 경우의 수:&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">panel_data</span> <span class="o">==</span> <span class="o">-</span><span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>값이 -9인 경우의 수: 0
값이 -8인 경우의 수: 0
</pre></div>
</div>
</div>
</div>
</section>
<section id="id4">
<h3>설문조사 항목<a class="headerlink" href="#id4" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ID</span></code> 표본 ID</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PANEL</span></code> 1: 초1 패널 2: 초4 패널 3: 중1 패널</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WAVE</span></code> 1: 1차 조사(2010년) 2: 2차 조사(2011년) 3: 3차 조사(2012년) 4: 4차 조사(2013년) 5: 5차 조사(2014년) 6: 6차 조사(2015년) 7: 7차 조사(2016년)
<br></br></p></li>
<li><p><strong>배경 변인</strong></p>
<ul>
<li><p>성별 <code class="docutils literal notranslate"><span class="pre">GENDER</span></code> 1 남 2 여</p></li>
<li><p>가구 연간 소득 <code class="docutils literal notranslate"><span class="pre">INCOME</span></code> 연소득 세후 만원</p></li>
<li><p>다문화가정 여부 <code class="docutils literal notranslate"><span class="pre">FAM1C</span></code> 다문화 가정 : 국제결혼 가정, 외국인 노동자 가정, 새터민(탈북자) 가정, 중국 조선족 가정 등 1 다문화가정 2 비다문화가정</p></li>
<li><p>부모 교육수준(최종학력) <code class="docutils literal notranslate"><span class="pre">HAK2A</span></code>(부) <code class="docutils literal notranslate"><span class="pre">HAK2B</span></code>(모) 1 중졸이하 2 고졸 3 전문대졸 4 대졸 5 대학원졸 6 해당사항없음(함께 살고 있지 않은 경우 “해당사항 없음”으로 응답)</p></li>
<li><p>(보호자)삶의 만족도 <code class="docutils literal notranslate"><span class="pre">PAR2</span></code> 1 매우 만족한다 2 만족하는 편이다 3 만족하지 못하는 편이다 4 전혀 만족하지 못한다
<br></br></p></li>
</ul>
</li>
<li><p><strong>개인 발달</strong></p>
<ul>
<li><p>건강상태 평가 <code class="docutils literal notranslate"><span class="pre">PHY3A</span></code> 1 매우 건강하다 2 건강한 편이다 3 건강하지 못한 편이다 4 매우 건강하지 못하다</p></li>
<li><p>과목별 주관적 평가 <code class="docutils literal notranslate"><span class="pre">INT1C01</span></code>-<code class="docutils literal notranslate"><span class="pre">INT1C05</span></code>(국어 수학 영어 과학 사회) 1 매우 잘 했다 2 잘한 편이다 3 보통이다 4 못한 편이다 5 매우 못했다 ** 과목별 (실제) 점수나 전체 성적 주관적 평가는 7차 조사에서만 조사됨.</p></li>
<li><p>학원/과외 시간 <code class="docutils literal notranslate"><span class="pre">TIM2A</span></code> 학원/과외시간- 등교일 (#시간) <code class="docutils literal notranslate"><span class="pre">TIM2B</span></code> 학원/과외시간- 등교일 (#분) <code class="docutils literal notranslate"><span class="pre">TIM2C</span></code> 학원/과외시간- 비등교일 (#시간) <code class="docutils literal notranslate"><span class="pre">TIM2D</span></code> 학원/과외시간- 비등교일 (#분)</p></li>
<li><p>방과후교육 연간 경험 유무 <code class="docutils literal notranslate"><span class="pre">EDU5A02</span></code> 1 있다 2 없다</p></li>
<li><p>(초1 패널) 초등 전 사교육 경험유무 <code class="docutils literal notranslate"><span class="pre">EDU4A</span></code> 1 있다 2 없다</p></li>
<li><p>(초4 및 중1 패널) 비행 행동(연간 유무) <code class="docutils literal notranslate"><span class="pre">DLQ1A01</span></code> 담배 피우기  <code class="docutils literal notranslate"><span class="pre">DLQ1A02</span></code> 술 마시기 <code class="docutils literal notranslate"><span class="pre">DLQ1A03</span></code> 무단결석 <code class="docutils literal notranslate"><span class="pre">DLQ1A04</span></code> 가출 <code class="docutils literal notranslate"><span class="pre">DLQ1A05</span></code> 다른 사람 심하게 놀리거나 조롱하기 <code class="docutils literal notranslate"><span class="pre">DLQ1A06</span></code> 다른 사람 집단따돌림(왕따)시키기 <code class="docutils literal notranslate"><span class="pre">DLQ1A07</span></code> 패싸움 <code class="docutils literal notranslate"><span class="pre">DLQ1A08</span></code> 다른 사람 심하게 때리기 <code class="docutils literal notranslate"><span class="pre">DLQ1A09</span></code> 다른 사람 협박하기 <code class="docutils literal notranslate"><span class="pre">DLQ1A10</span></code> 다른 사람 돈이나 물건 뺏기(삥뜯기) <code class="docutils literal notranslate"><span class="pre">DLQ1A11</span></code> 다른 사람 돈이나 물건 훔치기 <code class="docutils literal notranslate"><span class="pre">DLQ1A12</span></code> 성관계 <code class="docutils literal notranslate"><span class="pre">DLQ1A13</span></code> 성폭행이나 성희롱 <code class="docutils literal notranslate"><span class="pre">DLQ1A14</span></code> 돈을 걸고 도박 게임하기 1 있다 2 없다</p></li>
<li><p>(초4 및 중1 패널) 비행 피해(연간 유무) <code class="docutils literal notranslate"><span class="pre">DLQ2A01</span></code> 심한 놀림이나 조롱당하기 <code class="docutils literal notranslate"><span class="pre">DLQ2A02</span></code> 집단따돌림(왕따)당하기 <code class="docutils literal notranslate"><span class="pre">DLQ2A03</span></code> 심하게 맞기(폭행) <code class="docutils literal notranslate"><span class="pre">DLQ2A04</span></code> 협박당하기 <code class="docutils literal notranslate"><span class="pre">DLQ2A05</span></code> 돈이나 물건 뺏기기(삥뜯기기) <code class="docutils literal notranslate"><span class="pre">DLQ2A06</span></code> 성폭행이나 성희롱 <code class="docutils literal notranslate"><span class="pre">DLQ2A07</span></code> 심한 욕설 1 있다 2 없다
<br></br></p></li>
</ul>
</li>
<li><p><strong>발달 환경</strong></p>
<ul>
<li><p>부모의 관심 <code class="docutils literal notranslate"><span class="pre">FAM3A01</span></code> 다른 일(직장이나 바깥일)보다 나를 더 중요하게 생각하신다 <code class="docutils literal notranslate"><span class="pre">FAM3A02</span></code> 내가 학교에서 어떻게 생활하는지 관심을 갖고 물어보신다 <code class="docutils literal notranslate"><span class="pre">FAM3A03</span></code> 내 몸이나, 옷, 이불 등이 깨끗하도록 항상 신경 쓰신다 <code class="docutils literal notranslate"><span class="pre">FAM3A04</span></code> 내가 많이 아프면 적절한 치료를 받게 하신다 1 매우 그렇다 2 그런 편이다 3 그렇지 않은 편이다 4 전혀 그렇지 않다</p></li>
<li><p>부모의 학대 <code class="docutils literal notranslate"><span class="pre">FAM3B01</span></code> 내가 무언가 잘못했을 때 정도 이상으로 심하게 혼내신다 <code class="docutils literal notranslate"><span class="pre">FAM3B02</span></code> 내가 잘못하면 무조건 때리려고 하신다 <code class="docutils literal notranslate"><span class="pre">FAM3B03</span></code> 내 몸에 멍이 들거나 상처가 남을 정도로 부모님(보호자)께서 나를 심하게 대하신 적이 많다 <code class="docutils literal notranslate"><span class="pre">FAM3B04</span></code> 나에게 심한 말이나 욕을 하신 적이 많다(예: 멍청이, 개만도 못한 것, 나가 죽어라, 네가 없어졌으면 좋겠다 등)  1 매우 그렇다 2 그런 편이다 3 그렇지 않은 편이다 4 전혀 그렇지 않다</p></li>
<li><p>학교 학습활동 <code class="docutils literal notranslate"><span class="pre">EDU2A01</span></code> 학교 수업 시간이 재미있다 <code class="docutils literal notranslate"><span class="pre">EDU2A02</span></code> 학교 숙제를 빠뜨리지 않고 한다 <code class="docutils literal notranslate"><span class="pre">EDU2A03</span></code> 수업 시간에 배운 내용을 잘 알고 있다 1 매우 그렇다 2 그런 편이다 3 그렇지 않은 편이다 4 전혀 그렇지 않다</p></li>
<li><p>교우관계 <code class="docutils literal notranslate"><span class="pre">EDU2C01</span></code> 우리 반 아이들과 잘 어울린다 <code class="docutils literal notranslate"><span class="pre">EDU2C02</span></code> 친구와 다투었을 때 먼저 사과한다 <code class="docutils literal notranslate"><span class="pre">EDU2C03</span></code> 친구가 교과서나 준비물을 안 가져왔을 때 함께 보거나 빌려 준다 <code class="docutils literal notranslate"><span class="pre">EDU2C04</span></code> 친구가 하는 일을 방해한다 <code class="docutils literal notranslate"><span class="pre">EDU2C05</span></code> 놀이나 모둠활동을 할 때 친구들이 내 말을 잘 따라 준다 1 매우 그렇다 2 그런 편이다 3 그렇지 않은 편이다 4 전혀 그렇지 않다</p></li>
<li><p>교사관계 <code class="docutils literal notranslate"><span class="pre">EDU2D01</span></code> 선생님을 만나면 반갑게 인사한다 <code class="docutils literal notranslate"><span class="pre">EDU2D02</span></code> 선생님과 이야기하는 것이 편하다 <code class="docutils literal notranslate"><span class="pre">EDU2D03</span></code> 학교 밖에서 선생님을 만나면 반갑다 <code class="docutils literal notranslate"><span class="pre">EDU2D04</span></code> 우리 선생님께서는 나에게 친절하시다 1 매우 그렇다 2 그런 편이다 3 그렇지 않은 편이다 4 전혀 그렇지 않다</p></li>
</ul>
</li>
</ul>
<p><strong>성적이 8로 기록된 경우 결측값으로 처리</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 특정 열 선택</span>
<span class="n">columns_to_check</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;INT1C01&#39;</span><span class="p">,</span> <span class="s1">&#39;INT1C02&#39;</span><span class="p">,</span> <span class="s1">&#39;INT1C03&#39;</span><span class="p">,</span> <span class="s1">&#39;INT1C04&#39;</span><span class="p">,</span> <span class="s1">&#39;INT1C05&#39;</span><span class="p">]</span>

<span class="c1"># 값이 8인 경우가 몇 개인지 확인</span>
<span class="n">panel_data</span><span class="p">[</span><span class="n">columns_to_check</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INT1C01     1
INT1C02     0
INT1C03     0
INT1C04    26
INT1C05    84
dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 값이 8인 경우를 결측값으로 처리</span>
<span class="n">panel_data</span><span class="p">[</span><span class="n">columns_to_check</span><span class="p">]</span> <span class="o">=</span> <span class="n">panel_data</span><span class="p">[</span><span class="n">columns_to_check</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><strong>주관적 학업성적: <code class="docutils literal notranslate"><span class="pre">score</span></code></strong></p>
<ul class="simple">
<li><p>값이 높아질수록 잘하는 것으로 전환: 1(매우 잘했다)가 5로 바뀜</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;score_01&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;INT1C01&#39;</span><span class="p">]</span> 
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;score_02&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;INT1C02&#39;</span><span class="p">]</span> 
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;score_03&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;INT1C03&#39;</span><span class="p">]</span> 
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;score_04&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;INT1C04&#39;</span><span class="p">]</span> 
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;score_05&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;INT1C05&#39;</span><span class="p">]</span> 
</pre></div>
</div>
</div>
</div>
<p><strong>성적 변수 만들기</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 각 ID 별로 score_01부터 score_05까지의 평균값 계산하여 &#39;score&#39;로 지정</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;score&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">panel_data</span><span class="p">[</span>
    <span class="p">[</span><span class="s1">&#39;score_01&#39;</span><span class="p">,</span> <span class="s1">&#39;score_02&#39;</span><span class="p">,</span> <span class="s1">&#39;score_03&#39;</span><span class="p">,</span> <span class="s1">&#39;score_04&#39;</span><span class="p">,</span> <span class="s1">&#39;score_05&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    12636.000000
mean         3.333376
std          0.887940
min          1.000000
25%          2.800000
50%          3.400000
75%          4.000000
max          5.000000
Name: score, dtype: float64
</pre></div>
</div>
</div>
</div>
<p><strong>WAVE 더미</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;wave1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;WAVE&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;wave2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;WAVE&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;wave3&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;WAVE&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;wave4&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;WAVE&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;wave5&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;WAVE&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;wave6&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;WAVE&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;wave7&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;WAVE&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">panel_data</span><span class="p">[[</span><span class="s1">&#39;WAVE&#39;</span><span class="p">,</span> <span class="s1">&#39;wave1&#39;</span><span class="p">]])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>       WAVE  wave1
0         1      1
1         1      1
2         1      1
3         1      1
4         1      1
...     ...    ...
16641     7      0
16642     7      0
16643     7      0
16644     7      0
16645     7      0

[16646 rows x 2 columns]
</pre></div>
</div>
</div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">male</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 남학생 더미</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;male&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;GENDER&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">income</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># INCOME 값을 1000으로 나누어 단위를 조정</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;income&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;INCOME&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">1000</span>
</pre></div>
</div>
</div>
</div>
<p><strong>다문화 더미변수: <code class="docutils literal notranslate"><span class="pre">mc</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 다문화 더미</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;mcd&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;FAM1C&#39;</span><span class="p">]</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;mcd&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0        0.0
1        0.0
2        0.0
3        0.0
4        0.0
        ... 
16641    NaN
16642    NaN
16643    0.0
16644    NaN
16645    0.0
Name: mcd, Length: 16646, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Pivot table을 생성하여 ID별로 WAVE에 따른 mcd 값을 확인</span>
<span class="n">mcd_pivot</span> <span class="o">=</span> <span class="n">panel_data</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;WAVE&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;mcd&#39;</span><span class="p">)</span>

<span class="c1"># 결과 출력</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mcd_pivot</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>WAVE      1    2    3    4    5    6    7
ID                                       
15202   0.0  0.0  0.0  0.0  0.0  0.0  0.0
15203   0.0  0.0  0.0  0.0  0.0  0.0  0.0
15204   0.0  0.0  0.0  0.0  0.0  0.0  0.0
15205   0.0  0.0  0.0  0.0  0.0  0.0  0.0
15206   0.0  0.0  0.0  0.0  0.0  0.0  0.0
...     ...  ...  ...  ...  ...  ...  ...
168529  0.0  0.0  NaN  NaN  NaN  NaN  NaN
168530  0.0  0.0  0.0  NaN  0.0  0.0  NaN
168531  0.0  0.0  0.0  0.0  0.0  0.0  0.0
168532  0.0  0.0  0.0  0.0  0.0  NaN  NaN
168533  0.0  0.0  0.0  0.0  0.0  0.0  0.0

[2378 rows x 7 columns]
</pre></div>
</div>
</div>
</div>
<p><strong>다문화 더미변수 보정</strong></p>
<ul class="simple">
<li><p>일부 학생의 경우 WAVE에 따라 다문화 더미 변수(mcd) 값이 달라지는 경우가 있어, 이를 보정함</p></li>
<li><p>panel_data에서 각 ID에 대해 전체 WAVE에 있어서 mcd 값이 동일하지 않을 경우 각 ID 별로 최빈값을 구해 전체 WAVE에 대해 동일한 값을 부여하여 mc이란 변수를 새로 만드는 작업임.</p></li>
<li><p>mcd에 결측값만 있는 경우는 결측값을 반환</p></li>
<li><p>mcd의 1과 0이 동일한 경우에는 1을 반환</p></li>
</ul>
<p>다음은 간단한 예제 데이터를 사용해 바로 앞에서 설명한 다문화 더미변수 보정 작업이 제대로 작동할지를 미리 확인해보는 작업이다.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>## 보정작업 예제로 코드가 제대로 실행될지를 확인함 ##

import pandas as pd
import numpy as np

# 데이터 정의
data = {
    &#39;ID&#39;: [1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3],
    &#39;WAVE&#39;: [1, 2, 3, 4, 5, 6, 7, 1, 2, 3, 4, 5, 6, 7, 1, 2, 3, 4, 5, 6, 7],
    &#39;mcd&#39;: [np.nan, np.nan, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, np.nan, np.nan,         np.nan, np.nan, np.nan]
}
data = pd.DataFrame(data)

# ID별로 그룹화
grouped = data.groupby(&#39;ID&#39;)

# 각 ID에 대해 최빈값 계산
result = {}
for name, group in grouped:
    # 결측값이 아닌 데이터만 고려
    non_missing_data = group[&#39;mcd&#39;].dropna()
    if non_missing_data.empty:
        result[name] = None  # 모든 값이 결측인 경우
    else:
        counts = non_missing_data.value_counts()
        if len(counts) &gt; 1 and counts.iloc[0] == counts.iloc[1]:
            result[name] = 1  # 0과 1의 개수가 동일한 경우 1 선택
        else:
            result[name] = counts.idxmax()  # 가장 많이 나온 값

# 새로운 컬럼 mc을 생성하여 ID별로 계산된 값 매핑
data[&#39;mc&#39;] = data[&#39;ID&#39;].map(result)

# 데이터프레임 출력
data

******************************
	ID	WAVE	mcd	mc
0	1	1	NaN	1.0
1	1	2	NaN	1.0
2	1	3	1.0	1.0
3	1	4	1.0	1.0
4	1	5	1.0	1.0
5	1	6	1.0	1.0
6	1	7	1.0	1.0
7	2	1	1.0	0.0
8	2	2	1.0	0.0
9	2	3	0.0	0.0
10	2	4	0.0	0.0
11	2	5	0.0	0.0
12	2	6	0.0	0.0
13	2	7	0.0	0.0
14	3	1	0.0	1.0
15	3	2	1.0	1.0
16	3	3	NaN	1.0
17	3	4	NaN	1.0
18	3	5	NaN	1.0
19	3	6	NaN	1.0
20	3	7	NaN	1.0
</pre></div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">mc</span></code> 변수</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ID별로 그룹화</span>
<span class="n">grouped</span> <span class="o">=</span> <span class="n">panel_data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;ID&#39;</span><span class="p">)</span>

<span class="c1"># 각 ID에 대해 최빈값 계산</span>
<span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">grouped</span><span class="p">:</span>
    <span class="c1"># 결측값이 아닌 데이터만 고려</span>
    <span class="n">non_missing_data</span> <span class="o">=</span> <span class="n">group</span><span class="p">[</span><span class="s1">&#39;mcd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">non_missing_data</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="n">result</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># 모든 값이 결측인 경우</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">counts</span> <span class="o">=</span> <span class="n">non_missing_data</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">counts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">counts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">result</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># 0과 1의 개수가 동일한 경우 1 선택</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">counts</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span>  <span class="c1"># 가장 많이 나온 값</span>

<span class="c1"># 새로운 컬럼 mc을 생성하여 ID별로 계산된 값 매핑</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;ID&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

<span class="c1"># 데이터프레임 출력</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0        0.0
1        0.0
2        0.0
3        0.0
4        0.0
        ... 
16641    0.0
16642    0.0
16643    0.0
16644    0.0
16645    0.0
Name: mc, Length: 16646, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Pivot table을 생성하여 ID별로 WAVE에 따른 mc 값을 확인</span>
<span class="n">mc_pivot</span> <span class="o">=</span> <span class="n">panel_data</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;WAVE&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;mc&#39;</span><span class="p">)</span>

<span class="c1"># 결과 출력</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mc_pivot</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>WAVE      1    2    3    4    5    6    7
ID                                       
15202   0.0  0.0  0.0  0.0  0.0  0.0  0.0
15203   0.0  0.0  0.0  0.0  0.0  0.0  0.0
15204   0.0  0.0  0.0  0.0  0.0  0.0  0.0
15205   0.0  0.0  0.0  0.0  0.0  0.0  0.0
15206   0.0  0.0  0.0  0.0  0.0  0.0  0.0
...     ...  ...  ...  ...  ...  ...  ...
168529  0.0  0.0  0.0  0.0  0.0  0.0  0.0
168530  0.0  0.0  0.0  0.0  0.0  0.0  0.0
168531  0.0  0.0  0.0  0.0  0.0  0.0  0.0
168532  0.0  0.0  0.0  0.0  0.0  0.0  0.0
168533  0.0  0.0  0.0  0.0  0.0  0.0  0.0

[2378 rows x 7 columns]
</pre></div>
</div>
</div>
</div>
<p><strong>부모 교육수준: <code class="docutils literal notranslate"><span class="pre">fa_edu</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">mo_edu</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;fa_ed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;HAK2A&#39;</span><span class="p">]</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;mo_ed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;HAK2B&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p><strong>부모 학력수준이 6(해당사항없음)인 경우의 비율</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># 부모 학력 값이 6인 경우 비율을 계산</span>
<span class="n">percentage_fa_ed_6</span> <span class="o">=</span> <span class="p">(</span><span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;HAK2A&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span>
<span class="n">percentage_mo_ed_6</span> <span class="o">=</span> <span class="p">(</span><span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;HAK2B&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span>

<span class="c1"># 결과 출력</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;부의 학력수준이 &#39;해당사항없음&#39;인 경우의 비율: </span><span class="si">{</span><span class="n">percentage_fa_ed_6</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;모의 학력수준이 &#39;해당사항없음&#39;인 경우의 비율: </span><span class="si">{</span><span class="n">percentage_mo_ed_6</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>부의 학력수준이 &#39;해당사항없음&#39;인 경우의 비율: 0.00%
모의 학력수준이 &#39;해당사항없음&#39;인 경우의 비율: 0.00%
</pre></div>
</div>
</div>
</div>
<p><strong>값이 6인 경우 전체 평균값으로 대체: <code class="docutils literal notranslate"><span class="pre">fa_ed1</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">mo_ed1</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 새 변수를 생성하고, 모든 값을 기존 값으로 초기화</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;fa_ed1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;HAK2A&#39;</span><span class="p">]</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;mo_ed1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;HAK2B&#39;</span><span class="p">]</span>

<span class="c1"># 값이 6이 아닌 경우의 평균 계산</span>
<span class="n">fa_ed_avg</span> <span class="o">=</span> <span class="n">panel_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;HAK2A&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;HAK2A&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">mo_ed_avg</span> <span class="o">=</span> <span class="n">panel_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;HAK2B&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;HAK2B&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">fa_ed_avg</span><span class="p">,</span> <span class="n">mo_ed_avg</span><span class="p">)</span>

<span class="c1"># 값이 6인 경우를 평균값으로 대체</span>
<span class="n">panel_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;fa_ed1&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;fa_ed1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fa_ed_avg</span>
<span class="n">panel_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;mo_ed1&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;mo_ed1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mo_ed_avg</span>

<span class="nb">print</span><span class="p">(</span><span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;fa_ed1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;mo_ed1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3.0971558913678807 2.8702702702702703
3.0971558913678807 2.8702702702702703
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Pivot table을 생성하여 ID별로 WAVE에 따른 fa_ed1 및 mo_ed1 값을 확인</span>
<span class="n">fa_ed1_pivot</span> <span class="o">=</span> <span class="n">panel_data</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;WAVE&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;fa_ed1&#39;</span><span class="p">)</span>
<span class="n">mo_ed1_pivot</span> <span class="o">=</span> <span class="n">panel_data</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;WAVE&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;mo_ed1&#39;</span><span class="p">)</span>

<span class="c1"># 결과 출력</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fa_ed1_pivot</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mo_ed1_pivot</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>WAVE      1    2    3    4    5    6    7
ID                                       
15202   2.0  2.0  2.0  2.0  2.0  2.0  2.0
15203   4.0  4.0  4.0  4.0  4.0  4.0  4.0
15204   3.0  4.0  4.0  4.0  4.0  4.0  4.0
15205   4.0  4.0  4.0  4.0  4.0  4.0  4.0
15206   4.0  4.0  4.0  4.0  4.0  4.0  4.0
...     ...  ...  ...  ...  ...  ...  ...
168529  3.0  NaN  NaN  NaN  NaN  NaN  NaN
168530  3.0  4.0  4.0  NaN  2.0  2.0  NaN
168531  3.0  4.0  4.0  3.0  3.0  3.0  3.0
168532  2.0  2.0  2.0  2.0  2.0  NaN  NaN
168533  4.0  2.0  2.0  2.0  2.0  2.0  2.0

[2304 rows x 7 columns]
WAVE      1    2    3    4    5    6    7
ID                                       
15202   2.0  2.0  2.0  2.0  2.0  2.0  2.0
15203   4.0  4.0  4.0  4.0  4.0  4.0  4.0
15204   2.0  4.0  4.0  4.0  4.0  4.0  4.0
15205   4.0  4.0  4.0  4.0  4.0  4.0  4.0
15206   2.0  2.0  2.0  2.0  2.0  2.0  2.0
...     ...  ...  ...  ...  ...  ...  ...
168529  2.0  2.0  NaN  NaN  NaN  NaN  NaN
168530  3.0  4.0  4.0  NaN  2.0  2.0  NaN
168531  3.0  4.0  4.0  3.0  3.0  3.0  3.0
168532  2.0  2.0  2.0  2.0  2.0  NaN  NaN
168533  NaN  NaN  NaN  2.0  2.0  2.0  2.0

[2307 rows x 7 columns]
</pre></div>
</div>
</div>
</div>
<p><strong>부모 교육수준이 여러 값을 갖는 경우 최빈값으로 통일: <code class="docutils literal notranslate"><span class="pre">fa_edu</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">mo_edu</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># ID별로 그룹화</span>
<span class="n">grouped</span> <span class="o">=</span> <span class="n">panel_data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;ID&#39;</span><span class="p">)</span>

<span class="c1"># 각 ID에 대해 최빈값 계산</span>
<span class="k">def</span> <span class="nf">calculate_mode</span><span class="p">(</span><span class="n">group</span><span class="p">):</span>
    <span class="c1"># fa_ed1의 최빈값 계산</span>
    <span class="n">mode_value</span> <span class="o">=</span> <span class="n">group</span><span class="p">[</span><span class="s1">&#39;fa_ed1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">mode_value</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">mode_value</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># iloc[0]는 첫 번째(가장 크기가 작은) 최빈값</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>  <span class="c1"># 모든 값이 결측인 경우 NaN 반환</span>

<span class="c1"># 각 ID에 대한 최빈값을 가진 시리즈 생성</span>
<span class="n">fa_edu</span> <span class="o">=</span> <span class="n">grouped</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">calculate_mode</span><span class="p">)</span>

<span class="c1"># 새로운 컬럼 fa_edu를 생성하여 ID별로 계산된 최빈값 매핑</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;fa_edu&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;ID&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">fa_edu</span><span class="p">)</span>

<span class="c1"># 결과를 확인</span>
<span class="nb">print</span><span class="p">(</span><span class="n">panel_data</span><span class="p">[[</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;fa_ed1&#39;</span><span class="p">,</span> <span class="s1">&#39;fa_edu&#39;</span><span class="p">]])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>           ID  fa_ed1  fa_edu
0       15202     2.0     2.0
1       15203     4.0     4.0
2       15204     3.0     4.0
3       15205     4.0     4.0
4       15206     4.0     4.0
...       ...     ...     ...
16641  168529     NaN     3.0
16642  168530     NaN     2.0
16643  168531     3.0     3.0
16644  168532     NaN     2.0
16645  168533     2.0     2.0

[16646 rows x 3 columns]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># ID별로 그룹화</span>
<span class="n">grouped</span> <span class="o">=</span> <span class="n">panel_data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;ID&#39;</span><span class="p">)</span>

<span class="c1"># 각 ID에 대해 최빈값 계산</span>
<span class="k">def</span> <span class="nf">calculate_mode</span><span class="p">(</span><span class="n">group</span><span class="p">):</span>
    <span class="c1"># mo_ed1의 최빈값 계산</span>
    <span class="n">mode_value</span> <span class="o">=</span> <span class="n">group</span><span class="p">[</span><span class="s1">&#39;mo_ed1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">mode_value</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">mode_value</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># iloc[0]는 첫 번째(가장 크기가 작은) 최빈값</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>  <span class="c1"># 모든 값이 결측인 경우 NaN 반환</span>

<span class="c1"># 각 ID에 대한 최빈값을 가진 시리즈 생성</span>
<span class="n">mo_edu</span> <span class="o">=</span> <span class="n">grouped</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">calculate_mode</span><span class="p">)</span>

<span class="c1"># 새로운 컬럼 mo_edu를 생성하여 ID별로 계산된 최빈값 매핑</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;mo_edu&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;ID&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">mo_edu</span><span class="p">)</span>

<span class="c1"># 결과를 확인하려면 다음을 출력하십시오.</span>
<span class="nb">print</span><span class="p">(</span><span class="n">panel_data</span><span class="p">[[</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;mo_ed1&#39;</span><span class="p">,</span> <span class="s1">&#39;mo_edu&#39;</span><span class="p">]])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>           ID  mo_ed1  mo_edu
0       15202     2.0     2.0
1       15203     4.0     4.0
2       15204     2.0     4.0
3       15205     4.0     4.0
4       15206     2.0     2.0
...       ...     ...     ...
16641  168529     NaN     2.0
16642  168530     NaN     2.0
16643  168531     3.0     3.0
16644  168532     NaN     2.0
16645  168533     2.0     2.0

[16646 rows x 3 columns]
</pre></div>
</div>
</div>
</div>
<p><strong>보호자 삶의 만족도: <code class="docutils literal notranslate"><span class="pre">par_satis</span></code></strong></p>
<ul class="simple">
<li><p>값이 높을수록 만족도가 높은 것으로 전환: 1(1 매우 만족한다)가 4로 바뀜</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;par_satis&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;PAR2&#39;</span><span class="p">]</span> 
</pre></div>
</div>
</div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">health</span></code></strong></p>
<ul class="simple">
<li><p>값이 높을수록 건강한 것으로 전환: 1(매우 건강하다)가 4로 바뀜</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;health&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;PHY3A&#39;</span><span class="p">]</span> 
</pre></div>
</div>
</div>
</div>
<p><strong>학원/과외 시간: <code class="docutils literal notranslate"><span class="pre">aft_sch</span></code></strong></p>
<ul class="simple">
<li><p>등교일과 비등교일을 2대 1의 비율로 가중평균(단위: 시간) (2*(TIM2A + TIM2B/60) + (TIM2C + TIM2D/60))/3</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;aft_sch&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="mi">2</span><span class="o">/</span><span class="mi">3</span> <span class="o">*</span> <span class="p">(</span><span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;TIM2A&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;TIM2B&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">60</span><span class="p">)</span> <span class="o">+</span> 
    <span class="mi">1</span><span class="o">/</span><span class="mi">3</span> <span class="o">*</span> <span class="p">(</span><span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;TIM2C&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;TIM2D&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">60</span><span class="p">)</span>
<span class="p">)</span> 
<span class="n">panel_data</span><span class="p">[[</span><span class="s1">&#39;TIM2A&#39;</span><span class="p">,</span> <span class="s1">&#39;TIM2B&#39;</span><span class="p">,</span> <span class="s1">&#39;TIM2C&#39;</span><span class="p">,</span> <span class="s1">&#39;TIM2D&#39;</span><span class="p">,</span> <span class="s1">&#39;aft_sch&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>TIM2A</th>
      <th>TIM2B</th>
      <th>TIM2C</th>
      <th>TIM2D</th>
      <th>aft_sch</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2.0</td>
      <td>45.0</td>
      <td>1.0</td>
      <td>30.0</td>
      <td>2.333333</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.666667</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.666667</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.333333</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.333333</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>16641</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>16642</th>
      <td>2.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.333333</td>
    </tr>
    <tr>
      <th>16643</th>
      <td>2.0</td>
      <td>0.0</td>
      <td>6.0</td>
      <td>0.0</td>
      <td>3.333333</td>
    </tr>
    <tr>
      <th>16644</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>16645</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
    </tr>
  </tbody>
</table>
<p>16646 rows × 5 columns</p>
</div></div></div>
</div>
<p><strong>방과후교육 경험(더미): <code class="docutils literal notranslate"><span class="pre">aft_sch1</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 방과후교육 더미</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;aft_sch1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;EDU5A02&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p><strong>부모의 관심: <code class="docutils literal notranslate"><span class="pre">care</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 값이 높을수록 적응이 좋은 것으로 전환: 1(매우 그렇다)가 4로 바뀜</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;care1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;FAM3A01&#39;</span><span class="p">]</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;care2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;FAM3A02&#39;</span><span class="p">]</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;care3&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;FAM3A03&#39;</span><span class="p">]</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;care4&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;FAM3A04&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 평균을 계산하여 care 열로 저장</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;care&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">panel_data</span><span class="p">[[</span><span class="s1">&#39;care1&#39;</span><span class="p">,</span> <span class="s1">&#39;care2&#39;</span><span class="p">,</span> <span class="s1">&#39;care3&#39;</span><span class="p">,</span><span class="s1">&#39;care4&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><strong>부모의 학대: <code class="docutils literal notranslate"><span class="pre">abuse</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 값이 높을수록 적응이 좋은 것으로 전환: 1(매우 그렇다)가 4로 바뀜</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;abuse1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;FAM3B01&#39;</span><span class="p">]</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;abuse2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;FAM3B02&#39;</span><span class="p">]</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;abuse3&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;FAM3B03&#39;</span><span class="p">]</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;abuse4&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;FAM3B04&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 평균을 계산하여 care 열로 저장</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;abuse&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">panel_data</span><span class="p">[[</span><span class="s1">&#39;abuse1&#39;</span><span class="p">,</span> <span class="s1">&#39;abuse2&#39;</span><span class="p">,</span> <span class="s1">&#39;abuse3&#39;</span><span class="p">,</span><span class="s1">&#39;abuse4&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><strong>학교 학습활동: <code class="docutils literal notranslate"><span class="pre">sch_study</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 값이 높을수록 적응이 좋은 것으로 전환: 1(매우 그렇다)가 4로 바뀜</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;sch_study1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;EDU2A01&#39;</span><span class="p">]</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;sch_study2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;EDU2A02&#39;</span><span class="p">]</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;sch_study3&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;EDU2A03&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># sch_study1, sch_study2, sch_study3의 평균을 계산하여 sch_study 열로 저장</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;sch_study&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">panel_data</span><span class="p">[[</span><span class="s1">&#39;sch_study1&#39;</span><span class="p">,</span> <span class="s1">&#39;sch_study2&#39;</span><span class="p">,</span> <span class="s1">&#39;sch_study3&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><strong>교우관계: <code class="docutils literal notranslate"><span class="pre">friend</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 값이 높을수록 적응이 좋은 것으로 전환: 1(매우 그렇다)가 4로 바뀜</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;friend1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;EDU2C01&#39;</span><span class="p">]</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;friend2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;EDU2C02&#39;</span><span class="p">]</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;friend3&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;EDU2C03&#39;</span><span class="p">]</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;friend4&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;EDU2C04&#39;</span><span class="p">]</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;friend5&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;EDU2C05&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 평균을 계산하여 friend 열로 저장</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;friend&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">panel_data</span><span class="p">[[</span><span class="s1">&#39;friend1&#39;</span><span class="p">,</span> <span class="s1">&#39;friend2&#39;</span><span class="p">,</span> <span class="s1">&#39;friend3&#39;</span><span class="p">,</span>
                                   <span class="s1">&#39;friend4&#39;</span><span class="p">,</span> <span class="s1">&#39;friend5&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><strong>교사관계: <code class="docutils literal notranslate"><span class="pre">teacher</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 값이 높을수록 적응이 좋은 것으로 전환: 1(매우 그렇다)가 4로 바뀜</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;teacher1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;EDU2D01&#39;</span><span class="p">]</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;teacher2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;EDU2D02&#39;</span><span class="p">]</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;teacher3&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;EDU2D03&#39;</span><span class="p">]</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;teacher4&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;EDU2D04&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 평균을 계산하여 teacher 열로 저장</span>
<span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;teacher&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">panel_data</span><span class="p">[[</span><span class="s1">&#39;teacher1&#39;</span><span class="p">,</span> <span class="s1">&#39;teacher2&#39;</span><span class="p">,</span> 
                                    <span class="s1">&#39;teacher3&#39;</span><span class="p">,</span> <span class="s1">&#39;teacher4&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="id5">
<h2>2 관측 데이터 분석<a class="headerlink" href="#id5" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 필요 변수 리스트</span>
<span class="n">columns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;WAVE&#39;</span><span class="p">,</span> <span class="s1">&#39;WEIGHT1&#39;</span><span class="p">,</span> <span class="s1">&#39;score&#39;</span><span class="p">,</span> <span class="s1">&#39;mc&#39;</span><span class="p">,</span> <span class="s1">&#39;male&#39;</span><span class="p">,</span> <span class="s1">&#39;income&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;fa_edu&#39;</span><span class="p">,</span> <span class="s1">&#39;mo_edu&#39;</span><span class="p">,</span> <span class="s1">&#39;par_satis&#39;</span><span class="p">,</span> <span class="s1">&#39;health&#39;</span><span class="p">,</span> <span class="s1">&#39;aft_sch&#39;</span><span class="p">,</span> <span class="s1">&#39;aft_sch1&#39;</span><span class="p">,</span> <span class="s1">&#39;care&#39;</span><span class="p">,</span> <span class="s1">&#39;abuse&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;sch_study&#39;</span><span class="p">,</span><span class="s1">&#39;friend&#39;</span><span class="p">,</span> <span class="s1">&#39;teacher&#39;</span><span class="p">,</span> <span class="s1">&#39;wave2&#39;</span><span class="p">,</span> <span class="s1">&#39;wave3&#39;</span><span class="p">,</span> <span class="s1">&#39;wave4&#39;</span><span class="p">,</span> <span class="s1">&#39;wave5&#39;</span><span class="p">,</span> <span class="s1">&#39;wave6&#39;</span><span class="p">,</span> <span class="s1">&#39;wave7&#39;</span>
<span class="p">]</span>

<span class="c1"># WAVE 2~7 범위 데이터 및 필요한 변수 선택</span>
<span class="n">filtered_data</span> <span class="o">=</span> <span class="n">panel_data</span><span class="p">[</span><span class="n">panel_data</span><span class="p">[</span><span class="s1">&#39;WAVE&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">between</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">)][</span><span class="n">columns</span><span class="p">]</span>

<span class="c1"># 결측값이 없는 관측들만 필터링</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">filtered_data</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="c1"># 결과 데이터프레임 확인</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>WAVE</th>
      <th>WEIGHT1</th>
      <th>score</th>
      <th>mc</th>
      <th>male</th>
      <th>income</th>
      <th>fa_edu</th>
      <th>mo_edu</th>
      <th>par_satis</th>
      <th>...</th>
      <th>abuse</th>
      <th>sch_study</th>
      <th>friend</th>
      <th>teacher</th>
      <th>wave2</th>
      <th>wave3</th>
      <th>wave4</th>
      <th>wave5</th>
      <th>wave6</th>
      <th>wave7</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2378</th>
      <td>15202</td>
      <td>2</td>
      <td>418.658591</td>
      <td>3.4</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.6</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>3.0</td>
      <td>...</td>
      <td>1.25</td>
      <td>3.333333</td>
      <td>3.2</td>
      <td>3.25</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2379</th>
      <td>15203</td>
      <td>2</td>
      <td>428.976115</td>
      <td>5.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>5.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>3.0</td>
      <td>...</td>
      <td>2.00</td>
      <td>4.000000</td>
      <td>3.4</td>
      <td>4.00</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2380</th>
      <td>15204</td>
      <td>2</td>
      <td>418.658591</td>
      <td>3.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>5.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>3.0</td>
      <td>...</td>
      <td>1.50</td>
      <td>3.333333</td>
      <td>2.8</td>
      <td>3.00</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2381</th>
      <td>15205</td>
      <td>2</td>
      <td>428.976115</td>
      <td>3.8</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>10.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>3.0</td>
      <td>...</td>
      <td>1.00</td>
      <td>3.333333</td>
      <td>2.6</td>
      <td>3.00</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2382</th>
      <td>15206</td>
      <td>2</td>
      <td>418.658591</td>
      <td>3.6</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.6</td>
      <td>4.0</td>
      <td>2.0</td>
      <td>3.0</td>
      <td>...</td>
      <td>1.50</td>
      <td>3.666667</td>
      <td>3.2</td>
      <td>3.00</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>16627</th>
      <td>168511</td>
      <td>7</td>
      <td>119.183870</td>
      <td>4.6</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>6.5</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>...</td>
      <td>1.50</td>
      <td>3.333333</td>
      <td>3.2</td>
      <td>2.75</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>16629</th>
      <td>168515</td>
      <td>7</td>
      <td>119.183870</td>
      <td>2.4</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>4.5</td>
      <td>5.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>...</td>
      <td>1.00</td>
      <td>2.333333</td>
      <td>2.6</td>
      <td>3.00</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>16631</th>
      <td>168518</td>
      <td>7</td>
      <td>127.617004</td>
      <td>2.2</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>5.0</td>
      <td>3.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>...</td>
      <td>1.25</td>
      <td>3.000000</td>
      <td>3.0</td>
      <td>3.00</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>16643</th>
      <td>168531</td>
      <td>7</td>
      <td>119.183870</td>
      <td>4.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>4.0</td>
      <td>3.0</td>
      <td>3.0</td>
      <td>4.0</td>
      <td>...</td>
      <td>1.00</td>
      <td>2.666667</td>
      <td>3.2</td>
      <td>3.00</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>16645</th>
      <td>168533</td>
      <td>7</td>
      <td>119.183870</td>
      <td>4.4</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>4.0</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>3.0</td>
      <td>...</td>
      <td>1.00</td>
      <td>3.333333</td>
      <td>3.0</td>
      <td>3.50</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
<p>11203 rows × 24 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>WAVE</th>
      <th>WEIGHT1</th>
      <th>score</th>
      <th>mc</th>
      <th>male</th>
      <th>income</th>
      <th>fa_edu</th>
      <th>mo_edu</th>
      <th>par_satis</th>
      <th>...</th>
      <th>abuse</th>
      <th>sch_study</th>
      <th>friend</th>
      <th>teacher</th>
      <th>wave2</th>
      <th>wave3</th>
      <th>wave4</th>
      <th>wave5</th>
      <th>wave6</th>
      <th>wave7</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>11203.000000</td>
      <td>11203.000000</td>
      <td>11203.000000</td>
      <td>11203.00000</td>
      <td>11203.000000</td>
      <td>11203.000000</td>
      <td>11203.000000</td>
      <td>11203.000000</td>
      <td>11203.000000</td>
      <td>11203.000000</td>
      <td>...</td>
      <td>11203.000000</td>
      <td>11203.000000</td>
      <td>11203.000000</td>
      <td>11203.000000</td>
      <td>11203.000000</td>
      <td>11203.000000</td>
      <td>11203.000000</td>
      <td>11203.000000</td>
      <td>11203.000000</td>
      <td>11203.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>84593.318843</td>
      <td>4.408998</td>
      <td>279.883991</td>
      <td>3.36392</td>
      <td>0.011426</td>
      <td>0.522271</td>
      <td>4.820965</td>
      <td>3.106936</td>
      <td>2.887709</td>
      <td>2.979648</td>
      <td>...</td>
      <td>1.670721</td>
      <td>2.935568</td>
      <td>2.914585</td>
      <td>3.060274</td>
      <td>0.179595</td>
      <td>0.177006</td>
      <td>0.165224</td>
      <td>0.162456</td>
      <td>0.164420</td>
      <td>0.151299</td>
    </tr>
    <tr>
      <th>std</th>
      <td>46277.650989</td>
      <td>1.705929</td>
      <td>130.025908</td>
      <td>0.87456</td>
      <td>0.106283</td>
      <td>0.499526</td>
      <td>2.530460</td>
      <td>1.058792</td>
      <td>0.995739</td>
      <td>0.498468</td>
      <td>...</td>
      <td>0.626779</td>
      <td>0.589772</td>
      <td>0.393647</td>
      <td>0.628309</td>
      <td>0.383867</td>
      <td>0.381691</td>
      <td>0.371399</td>
      <td>0.368886</td>
      <td>0.370673</td>
      <td>0.358356</td>
    </tr>
    <tr>
      <th>min</th>
      <td>15202.000000</td>
      <td>2.000000</td>
      <td>61.833918</td>
      <td>1.00000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>...</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>46819.000000</td>
      <td>3.000000</td>
      <td>182.252970</td>
      <td>2.80000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>3.400000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>3.000000</td>
      <td>...</td>
      <td>1.250000</td>
      <td>2.666667</td>
      <td>2.600000</td>
      <td>2.750000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>81317.000000</td>
      <td>4.000000</td>
      <td>251.680436</td>
      <td>3.40000</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>4.500000</td>
      <td>3.000000</td>
      <td>3.000000</td>
      <td>3.000000</td>
      <td>...</td>
      <td>1.500000</td>
      <td>3.000000</td>
      <td>2.800000</td>
      <td>3.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>127822.000000</td>
      <td>6.000000</td>
      <td>362.968073</td>
      <td>4.00000</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>6.000000</td>
      <td>4.000000</td>
      <td>4.000000</td>
      <td>3.000000</td>
      <td>...</td>
      <td>2.000000</td>
      <td>3.333333</td>
      <td>3.200000</td>
      <td>3.500000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>168533.000000</td>
      <td>7.000000</td>
      <td>897.032228</td>
      <td>5.00000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>60.000000</td>
      <td>5.000000</td>
      <td>5.000000</td>
      <td>4.000000</td>
      <td>...</td>
      <td>4.000000</td>
      <td>4.000000</td>
      <td>4.000000</td>
      <td>4.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
<p>8 rows × 24 columns</p>
</div></div></div>
</div>
<section id="id6">
<h3>성적 평균 변화 추이<a class="headerlink" href="#id6" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 연차별 score 변수의 평균값 계산</span>
<span class="n">score_by_wave</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;WAVE&#39;</span><span class="p">)[</span><span class="s1">&#39;score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">score_by_wave</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>WAVE
2    3.738469
3    3.688527
4    3.152431
5    3.158214
6    3.258496
7    3.105959
Name: score, dtype: float64
</pre></div>
</div>
</div>
</div>
</section>
<section id="id7">
<h3>성적 평균 변화 추이 그래프 그리기<a class="headerlink" href="#id7" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 그래프에서 한글이 깨지는 것을 막기 위해서는 아래 명령문을 실행해야 한다.</span>

<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">font_manager</span><span class="p">,</span> <span class="n">rc</span>

<span class="n">font_path</span> <span class="o">=</span> <span class="s2">&quot;/Windows/Fonts/malgun.ttf&quot;</span>
<span class="n">font</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">FontProperties</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="n">font_path</span><span class="p">)</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
<span class="n">rc</span><span class="p">(</span><span class="s1">&#39;font&#39;</span><span class="p">,</span> <span class="n">family</span><span class="o">=</span><span class="n">font</span><span class="p">)</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.unicode_minus&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># 축에 마이너스 부호 제대로 나오게 하기</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># 연차별 score(성적) 평균값 계산</span>
<span class="n">score_mean_by_wave</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;WAVE&#39;</span><span class="p">)[</span><span class="s1">&#39;score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># 그래프 크기 설정</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="c1"># 선 그래프 그리기</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">score_mean_by_wave</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> 
         <span class="n">score_mean_by_wave</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>

<span class="c1"># 데이터 레이블(소수점 2자리) 추가 (간격 조정)</span>
<span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">score_mean_by_wave</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">score_mean_by_wave</span><span class="o">.</span><span class="n">values</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="mf">0.05</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">y</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">)</span>

<span class="c1"># 그래프 타이틀과 축 라벨 설정</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;연차별 평균 성적&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;조사 연차&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;점수&#39;</span><span class="p">)</span>

<span class="c1"># 세로축 범위, 틱 값 설정</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">([</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">])</span>

<span class="c1"># 그래프 출력</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/3d38e8ba21b2dab154b19fee279544ed491163afc5a1a74c210570a8dbc1aa0a.png" src="../_images/3d38e8ba21b2dab154b19fee279544ed491163afc5a1a74c210570a8dbc1aa0a.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 다문화 청소년(mc==1)에 대한 데이터 필터링</span>
<span class="n">multicultural_youth</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>

<span class="c1"># 연차별 &#39;score&#39; 평균 계산</span>
<span class="n">score_by_wave</span> <span class="o">=</span> <span class="n">multicultural_youth</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;WAVE&#39;</span><span class="p">)[</span><span class="s1">&#39;score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">score_by_wave</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>WAVE
2    3.484615
3    3.323077
4    2.968421
5    2.645238
6    3.031579
7    2.791176
Name: score, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;WAVE&#39;</span><span class="p">,</span> <span class="s1">&#39;mc&#39;</span><span class="p">])[</span><span class="s1">&#39;score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>mc</th>
      <th>0.0</th>
      <th>1.0</th>
    </tr>
    <tr>
      <th>WAVE</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2</th>
      <td>3.741793</td>
      <td>3.484615</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3.693383</td>
      <td>3.323077</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3.154340</td>
      <td>2.968421</td>
    </tr>
    <tr>
      <th>5</th>
      <td>3.164202</td>
      <td>2.645238</td>
    </tr>
    <tr>
      <th>6</th>
      <td>3.260861</td>
      <td>3.031579</td>
    </tr>
    <tr>
      <th>7</th>
      <td>3.109148</td>
      <td>2.791176</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># 그룹화 및 계산 수행</span>
<span class="n">score_by_wave_mc</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;WAVE&#39;</span><span class="p">,</span> <span class="s1">&#39;mc&#39;</span><span class="p">])[</span><span class="s1">&#39;score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span>

<span class="c1"># 결과 데이터를 선 그래프로 그리기</span>
<span class="n">score_by_wave_mc</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;line&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>  <span class="c1"># kind=&#39;line&#39;: 선 그래프</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;연차별 다문화 및 비다문화 학생의 평균 성적&#39;</span><span class="p">)</span>  <span class="c1"># 그래프 제목</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;WAVE&#39;</span><span class="p">)</span>  <span class="c1"># x축 레이블</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;평균 성적&#39;</span><span class="p">)</span>  <span class="c1"># y축 레이블</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># 그리드 표시</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;비다문화&#39;</span><span class="p">,</span> <span class="s1">&#39;다문화&#39;</span><span class="p">])</span>  <span class="c1"># 범례 표시</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># 그래프 출력</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/929edf519ef1192024fa4643904a9ed079c006ace95d647c040bbcf3bfeac9b4.png" src="../_images/929edf519ef1192024fa4643904a9ed079c006ace95d647c040bbcf3bfeac9b4.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 다문화학생(mc==1)만 선택</span>
<span class="n">multicultural_students</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>

<span class="c1"># 연차별로 그룹화하고 크기 계산</span>
<span class="n">count_by_wave</span> <span class="o">=</span> <span class="n">multicultural_students</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;WAVE&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">count_by_wave</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>WAVE
2    26
3    26
4    19
5    21
6    19
7    17
dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 다문화 학생 수 계산</span>
<span class="n">mc_counts</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;WAVE&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>

<span class="c1"># 전체 학생 수 계산</span>
<span class="n">total_counts</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;WAVE&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>

<span class="c1"># 비율 계산</span>
<span class="n">mc_ratio</span> <span class="o">=</span> <span class="n">mc_counts</span> <span class="o">/</span> <span class="n">total_counts</span> <span class="o">*</span> <span class="mi">100</span>

<span class="c1"># 결과를 데이터프레임으로 조합</span>
<span class="n">mc_summary</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;MC_Counts&#39;</span><span class="p">:</span> <span class="n">mc_counts</span><span class="p">,</span> <span class="s1">&#39;Total_Counts&#39;</span><span class="p">:</span> <span class="n">total_counts</span><span class="p">,</span> <span class="s1">&#39;MC_Ratio&#39;</span><span class="p">:</span> <span class="n">mc_ratio</span><span class="p">})</span>

<span class="c1"># 결과 출력</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mc_summary</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>      MC_Counts  Total_Counts  MC_Ratio
WAVE                                   
2            26          2012  1.292247
3            26          1983  1.311145
4            19          1851  1.026472
5            21          1820  1.153846
6            19          1842  1.031488
7            17          1695  1.002950
</pre></div>
</div>
</div>
</div>
<p><strong>패널 분석 대상 데이터를 data2010e4.csv 파일로 저장</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;..\Data\KCYPS2010 e4[EXCEL]\data2010e4.csv&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="id8">
<h2>3 패널 회귀분석<a class="headerlink" href="#id8" title="Link to this heading">#</a></h2>
<section id="id9">
<h3>추정 모형<a class="headerlink" href="#id9" title="Link to this heading">#</a></h3>
<p>추정 모형은 다음과 같다.</p>
<div class="math notranslate nohighlight">
\[
y_{it} = \beta_0 + \beta_1 m_i + \beta_2 x_{it} + \beta_3 x_{it} m_i + \beta_4 d_t + u_i + e_{it} \tag{1}
\]</div>
<p>여기에서 <span class="math notranslate nohighlight">\(i\)</span>는 패널에 속한 어떤 개인을 나타내고, <span class="math notranslate nohighlight">\(t\)</span>는 개인의 특성이 관찰된 어떤 시점을 의미하며, <span class="math notranslate nohighlight">\(y_{it}\)</span>는 시점 <span class="math notranslate nohighlight">\(t\)</span>에서 개인 <span class="math notranslate nohighlight">\(i\)</span>의 학업성적을 나타낸다. 우변 첫 번째 항인 <span class="math notranslate nohighlight">\(m_i\)</span>는 다문화 더미변수로서 다문화 학생이면 1, 그렇지 않으면 0의 값을 가지며, 시점에 상관없이 동일한 값을 갖는다. 소수이기는 하지만, 주어진 조사기간 중 다문화가정 여부에 대한 응답이 바뀌는 경우도 발견되는데, 다수결 원칙을 사용해 이를 하나의 값으로 통일시켰다.</p>
<p><span class="math notranslate nohighlight">\(x_{it}\)</span>는 학업성적에 영향을 미치는 설명변수로서 가구의 소득 수준이 대표적 예이다. <span class="math notranslate nohighlight">\(x_{it}\)</span>에 아래첨자 <span class="math notranslate nohighlight">\(t\)</span>가 붙어 있지만, 남녀 성별 변수와 같은 시간불변(time-invariant) 변수도 설명변수가 될 수 있다. <span class="math notranslate nohighlight">\(d_t\)</span>는 연도별 특성을 포착하기 위한 시간 더미변수로서, 가령 <span class="math notranslate nohighlight">\(d_{2012}\)</span>는 연도가 2012년이면 1의 값을 갖고, 그 외에는 0의 값을 갖는다. <span class="math notranslate nohighlight">\(u_i\)</span>는 개인별 이질성(heterogeneity)을 나타내는 것으로서 확률효과(random effect) 모형에서는 이것을 확률변수로 간주한다.</p>
<p>KCYPS 데이터의 경우 데이터의 시점(<span class="math notranslate nohighlight">\(t\)</span>)의 개수가 다섯 개(중1 패널) 또는 여섯 개(초1・초4 패널)에 불과한 데 비해, 개인(<span class="math notranslate nohighlight">\(i\)</span>)의 숫자는 이보다 훨씬 많기 때문에 <span class="math notranslate nohighlight">\(u_i\)</span>를 고정된 값으로 간주하는 고정효과(fixed effect) 모형에 비해 확률효과 모형이 추정에서 더 효율적이라고 판단했다. 또한 위에 제시된 모형에서 가장 중요한 변수인 <span class="math notranslate nohighlight">\(m_i\)</span>가 시간불변 변수라서 고정효과 모형을 사용할 경우 <span class="math notranslate nohighlight">\(m_i\)</span>의 계수를 추정할 수 없다는 문제도 있다.</p>
<p>위 모형에서 다문화 더미변수 <span class="math notranslate nohighlight">\(m_i\)</span>의 계수인 <span class="math notranslate nohighlight">\(\beta_1\)</span>은 본 연구에서 가장 중요한 계수로서 만약 이것이 플러스(마이너스) 부호이면, 다른 조건(<span class="math notranslate nohighlight">\(x_{it}\)</span> 및 <span class="math notranslate nohighlight">\(d_t\)</span>)이 동일할 때 다문화 학생의 학업성적이 비다문화 학생에 비해 더 높은(낮은) 경향이 있다는 것을 의미한다. 한 가지 유의할 것은 <span class="math notranslate nohighlight">\(\beta_1\)</span>의 크기가 두 그룹 학업성적의 평균적인 차이는 아니라는 점이다. 이는 위 식의 우변에 상호작용항(<span class="math notranslate nohighlight">\(x_{it} m_i\)</span>)이 들어 있기 때문이다. 따라서 다른 조건이 동일한 상태에서 <span class="math notranslate nohighlight">\(m_i\)</span>가 0일 때와 1일 때의 평균적인 차이는 <span class="math notranslate nohighlight">\(\beta_1\)</span>에다 <span class="math notranslate nohighlight">\(\beta_3 x_{it}\)</span>를 더한 값이다.</p>
<p>위 식 1에서 상호작용항 <span class="math notranslate nohighlight">\(x_{it} m_i\)</span>는 설명변수 <span class="math notranslate nohighlight">\(x_{it}\)</span>가 학업성적에 영향을 미치는 효과에 있어서 다문화 학생과 비다문화 학생 간에 어떤 차이가 있는지를 포착하는 역할을 한다. 다른 조건이 동일할 때, <span class="math notranslate nohighlight">\(x_{it}\)</span>가 학업성적 <span class="math notranslate nohighlight">\(y_{it}\)</span>에 미치는 평균적인 효과는 비다문화 학생의 경우에는 <span class="math notranslate nohighlight">\(\beta_2\)</span>이지만, 다문화 학생의 경우에는 그것에다 상호작용항의 계수를 더한 <span class="math notranslate nohighlight">\(\beta_2 + \beta_3\)</span>가 된다. 따라서 상호작용항의 계수 <span class="math notranslate nohighlight">\(\beta_3\)</span>만큼 다문화 학생과 비다문화 학생 간에 소위 한계효과(marginal effect)의 차이가 있는 것이다.</p>
</section>
<section id="id10">
<h3>초4 패널 추정 작업<a class="headerlink" href="#id10" title="Link to this heading">#</a></h3>
<p><strong>data2010e4.csv 불러오기</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;..\Data\KCYPS2010 e4[EXCEL]\data2010e4.csv&#39;</span><span class="p">)</span> 
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>WAVE</th>
      <th>WEIGHT1</th>
      <th>score</th>
      <th>mc</th>
      <th>male</th>
      <th>income</th>
      <th>fa_edu</th>
      <th>mo_edu</th>
      <th>par_satis</th>
      <th>...</th>
      <th>abuse</th>
      <th>sch_study</th>
      <th>friend</th>
      <th>teacher</th>
      <th>wave2</th>
      <th>wave3</th>
      <th>wave4</th>
      <th>wave5</th>
      <th>wave6</th>
      <th>wave7</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>15202</td>
      <td>2</td>
      <td>418.658591</td>
      <td>3.4</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.6</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>3.0</td>
      <td>...</td>
      <td>1.25</td>
      <td>3.333333</td>
      <td>3.2</td>
      <td>3.25</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>15203</td>
      <td>2</td>
      <td>428.976115</td>
      <td>5.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>5.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>3.0</td>
      <td>...</td>
      <td>2.00</td>
      <td>4.000000</td>
      <td>3.4</td>
      <td>4.00</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>15204</td>
      <td>2</td>
      <td>418.658591</td>
      <td>3.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>5.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>3.0</td>
      <td>...</td>
      <td>1.50</td>
      <td>3.333333</td>
      <td>2.8</td>
      <td>3.00</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>15205</td>
      <td>2</td>
      <td>428.976115</td>
      <td>3.8</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>10.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>3.0</td>
      <td>...</td>
      <td>1.00</td>
      <td>3.333333</td>
      <td>2.6</td>
      <td>3.00</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>15206</td>
      <td>2</td>
      <td>418.658591</td>
      <td>3.6</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.6</td>
      <td>4.0</td>
      <td>2.0</td>
      <td>3.0</td>
      <td>...</td>
      <td>1.50</td>
      <td>3.666667</td>
      <td>3.2</td>
      <td>3.00</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>11198</th>
      <td>168511</td>
      <td>7</td>
      <td>119.183870</td>
      <td>4.6</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>6.5</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>...</td>
      <td>1.50</td>
      <td>3.333333</td>
      <td>3.2</td>
      <td>2.75</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>11199</th>
      <td>168515</td>
      <td>7</td>
      <td>119.183870</td>
      <td>2.4</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>4.5</td>
      <td>5.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>...</td>
      <td>1.00</td>
      <td>2.333333</td>
      <td>2.6</td>
      <td>3.00</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>11200</th>
      <td>168518</td>
      <td>7</td>
      <td>127.617004</td>
      <td>2.2</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>5.0</td>
      <td>3.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>...</td>
      <td>1.25</td>
      <td>3.000000</td>
      <td>3.0</td>
      <td>3.00</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>11201</th>
      <td>168531</td>
      <td>7</td>
      <td>119.183870</td>
      <td>4.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>4.0</td>
      <td>3.0</td>
      <td>3.0</td>
      <td>4.0</td>
      <td>...</td>
      <td>1.00</td>
      <td>2.666667</td>
      <td>3.2</td>
      <td>3.00</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>11202</th>
      <td>168533</td>
      <td>7</td>
      <td>119.183870</td>
      <td>4.4</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>4.0</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>3.0</td>
      <td>...</td>
      <td>1.00</td>
      <td>3.333333</td>
      <td>3.0</td>
      <td>3.50</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
<p>11203 rows × 24 columns</p>
</div></div></div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">linearmodels</span></code> 패키지 설치</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># %pip install linearmodels # 처음에 한 번만 설치</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="pooled-ols">
<h3>통합(pooled) OLS 모형<a class="headerlink" href="#pooled-ols" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">linearmodels.panel</span> <span class="kn">import</span> <span class="n">PooledOLS</span><span class="p">,</span> <span class="n">PanelOLS</span><span class="p">,</span> <span class="n">RandomEffects</span><span class="p">,</span> <span class="n">compare</span>
<span class="kn">from</span> <span class="nn">statsmodels.api</span> <span class="kn">import</span> <span class="n">add_constant</span>

<span class="c1"># ID와 WAVE를 인덱스로 설정</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;WAVE&#39;</span><span class="p">])</span>

<span class="c1"># 상호작용 항</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;male*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;male&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;income*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;income&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;fa_edu*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fa_edu&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;mo_edu*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mo_edu&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;par_satis*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;par_satis&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>

<span class="n">data</span><span class="p">[</span><span class="s1">&#39;health*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;health&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;aft_sch*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;aft_sch&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;aft_sch1*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;aft_sch1&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>

<span class="n">data</span><span class="p">[</span><span class="s1">&#39;care*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;care&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;abuse*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;abuse&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;sch_study*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;sch_study&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;friend*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;friend&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;teacher*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;teacher&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>

<span class="c1"># X 변수(상수항, 시간 더미 및 상호작용 항)</span>
<span class="n">X_with_const</span> <span class="o">=</span> <span class="n">add_constant</span><span class="p">(</span>
    <span class="n">data</span><span class="p">[[</span><span class="s1">&#39;mc&#39;</span><span class="p">,</span>
          <span class="s1">&#39;male&#39;</span><span class="p">,</span> <span class="s1">&#39;income&#39;</span><span class="p">,</span> <span class="s1">&#39;fa_edu&#39;</span><span class="p">,</span> <span class="s1">&#39;mo_edu&#39;</span><span class="p">,</span> <span class="s1">&#39;par_satis&#39;</span><span class="p">,</span>
          <span class="s1">&#39;health&#39;</span><span class="p">,</span> <span class="s1">&#39;aft_sch&#39;</span><span class="p">,</span> <span class="s1">&#39;aft_sch1&#39;</span><span class="p">,</span> <span class="s1">&#39;care&#39;</span><span class="p">,</span> <span class="s1">&#39;abuse&#39;</span><span class="p">,</span>
          <span class="s1">&#39;sch_study&#39;</span><span class="p">,</span> <span class="s1">&#39;friend&#39;</span><span class="p">,</span> <span class="s1">&#39;teacher&#39;</span><span class="p">,</span>
          <span class="s1">&#39;male*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;income*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;fa_edu*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;mo_edu*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;par_satis*mc&#39;</span><span class="p">,</span>
          <span class="s1">&#39;health*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;aft_sch*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;aft_sch1*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;care*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;abuse*mc&#39;</span><span class="p">,</span>
          <span class="s1">&#39;sch_study*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;friend*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;teacher*mc&#39;</span><span class="p">,</span>
          <span class="s1">&#39;wave3&#39;</span><span class="p">,</span> <span class="s1">&#39;wave4&#39;</span><span class="p">,</span> <span class="s1">&#39;wave5&#39;</span><span class="p">,</span> <span class="s1">&#39;wave6&#39;</span><span class="p">,</span> <span class="s1">&#39;wave7&#39;</span><span class="p">]]</span>
<span class="p">)</span>

<span class="c1"># Pooled OLS 모델을 사용하여 회귀 모델을 실행</span>
<span class="n">mod</span> <span class="o">=</span> <span class="n">PooledOLS</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;score&#39;</span><span class="p">],</span> <span class="n">X_with_const</span><span class="p">)</span>
<span class="n">pooled_results</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">cov_type</span><span class="o">=</span><span class="s1">&#39;clustered&#39;</span><span class="p">,</span> <span class="n">cluster_entity</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># 결과 요약을 출력</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pooled_results</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>                          PooledOLS Estimation Summary                          
================================================================================
Dep. Variable:                  score   R-squared:                        0.3519
Estimator:                  PooledOLS   R-squared (Between):              0.4655
No. Observations:               11203   R-squared (Within):               0.2225
Date:                Sat, Feb 22 2025   R-squared (Overall):              0.3519
Time:                        12:13:30   Log-likelihood                -1.196e+04
Cov. Estimator:             Clustered                                           
                                        F-statistic:                      189.57
Entities:                        2165   P-value                           0.0000
Avg Obs:                       5.1746   Distribution:                F(32,11170)
Min Obs:                       1.0000                                           
Max Obs:                       6.0000   F-statistic (robust):             155.69
                                        P-value                           0.0000
Time periods:                       6   Distribution:                F(32,11170)
Avg Obs:                       1867.2                                           
Min Obs:                       1695.0                                           
Max Obs:                       2012.0                                           
                                                                                
                              Parameter Estimates                               
================================================================================
              Parameter  Std. Err.     T-stat    P-value    Lower CI    Upper CI
--------------------------------------------------------------------------------
const            0.8721     0.1055     8.2622     0.0000      0.6652      1.0790
mc              -1.3975     0.8271    -1.6895     0.0911     -3.0188      0.2239
male             0.0422     0.0213     1.9784     0.0479      0.0004      0.0839
income           0.0097     0.0037     2.6057     0.0092      0.0024      0.0170
fa_edu           0.0579     0.0145     3.9785     0.0001      0.0294      0.0864
mo_edu           0.0408     0.0156     2.6192     0.0088      0.0103      0.0713
par_satis        0.0389     0.0156     2.4865     0.0129      0.0082      0.0695
health          -0.0031     0.0154    -0.1981     0.8429     -0.0333      0.0272
aft_sch          0.0746     0.0081     9.2170     0.0000      0.0588      0.0905
aft_sch1         0.1280     0.0256     5.0037     0.0000      0.0779      0.1782
care             0.0780     0.0172     4.5448     0.0000      0.0444      0.1116
abuse           -0.0560     0.0142    -3.9609     0.0001     -0.0838     -0.0283
sch_study        0.5551     0.0188     29.555     0.0000      0.5183      0.5919
friend           0.1372     0.0241     5.6914     0.0000      0.0900      0.1845
teacher         -0.0216     0.0154    -1.4018     0.1610     -0.0517      0.0086
male*mc          0.4042     0.1964     2.0578     0.0396      0.0192      0.7892
income*mc        0.0439     0.0432     1.0173     0.3091     -0.0407      0.1286
fa_edu*mc        0.0068     0.1012     0.0670     0.9466     -0.1916      0.2052
mo_edu*mc       -0.0764     0.0787    -0.9718     0.3312     -0.2306      0.0778
par_satis*mc     0.1939     0.1170     1.6569     0.0976     -0.0355      0.4233
health*mc        0.0698     0.1221     0.5721     0.5673     -0.1695      0.3092
aft_sch*mc       0.0057     0.0694     0.0815     0.9351     -0.1304      0.1417
aft_sch1*mc     -0.1637     0.2004    -0.8170     0.4140     -0.5565      0.2291
care*mc          0.0385     0.1170     0.3292     0.7420     -0.1908      0.2678
abuse*mc         0.1250     0.1130     1.1067     0.2684     -0.0964      0.3464
sch_study*mc     0.4129     0.1169     3.5331     0.0004      0.1838      0.6419
friend*mc       -0.3326     0.1964    -1.6938     0.0903     -0.7176      0.0523
teacher*mc      -0.0333     0.1073    -0.3105     0.7562     -0.2437      0.1771
wave3           -0.0308     0.0164    -1.8855     0.0594     -0.0629      0.0012
wave4           -0.5239     0.0202    -25.899     0.0000     -0.5636     -0.4843
wave5           -0.4879     0.0211    -23.127     0.0000     -0.5293     -0.4466
wave6           -0.4064     0.0205    -19.776     0.0000     -0.4466     -0.3661
wave7           -0.5449     0.0204    -26.729     0.0000     -0.5849     -0.5049
================================================================================
</pre></div>
</div>
</div>
</div>
</section>
<section id="id11">
<h3>고정효과 모형<a class="headerlink" href="#id11" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">linearmodels.panel</span> <span class="kn">import</span> <span class="n">PooledOLS</span><span class="p">,</span> <span class="n">PanelOLS</span><span class="p">,</span> <span class="n">RandomEffects</span><span class="p">,</span> <span class="n">compare</span>
<span class="kn">from</span> <span class="nn">statsmodels.api</span> <span class="kn">import</span> <span class="n">add_constant</span>

<span class="c1"># ID와 WAVE를 인덱스로 설정</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;WAVE&#39;</span><span class="p">])</span>

<span class="c1"># 상호작용 항</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;male*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;male&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;income*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;income&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;fa_edu*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fa_edu&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;mo_edu*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mo_edu&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;par_satis*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;par_satis&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>

<span class="n">data</span><span class="p">[</span><span class="s1">&#39;health*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;health&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;aft_sch*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;aft_sch&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;aft_sch1*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;aft_sch1&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>

<span class="n">data</span><span class="p">[</span><span class="s1">&#39;care*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;care&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;abuse*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;abuse&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;sch_study*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;sch_study&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;friend*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;friend&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;teacher*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;teacher&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>

<span class="c1"># X 변수(상수항, 시간 더미 및 상호작용 항)</span>
<span class="n">X_with_const</span> <span class="o">=</span> <span class="n">add_constant</span><span class="p">(</span>
    <span class="n">data</span><span class="p">[[</span><span class="s1">&#39;mc&#39;</span><span class="p">,</span>
          <span class="s1">&#39;male&#39;</span><span class="p">,</span> <span class="s1">&#39;income&#39;</span><span class="p">,</span> <span class="s1">&#39;fa_edu&#39;</span><span class="p">,</span> <span class="s1">&#39;mo_edu&#39;</span><span class="p">,</span> <span class="s1">&#39;par_satis&#39;</span><span class="p">,</span>
          <span class="s1">&#39;health&#39;</span><span class="p">,</span> <span class="s1">&#39;aft_sch&#39;</span><span class="p">,</span> <span class="s1">&#39;aft_sch1&#39;</span><span class="p">,</span> <span class="s1">&#39;care&#39;</span><span class="p">,</span> <span class="s1">&#39;abuse&#39;</span><span class="p">,</span>
          <span class="s1">&#39;sch_study&#39;</span><span class="p">,</span> <span class="s1">&#39;friend&#39;</span><span class="p">,</span> <span class="s1">&#39;teacher&#39;</span><span class="p">,</span>
          <span class="s1">&#39;male*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;income*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;fa_edu*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;mo_edu*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;par_satis*mc&#39;</span><span class="p">,</span>
          <span class="s1">&#39;health*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;aft_sch*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;aft_sch1*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;care*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;abuse*mc&#39;</span><span class="p">,</span>
          <span class="s1">&#39;sch_study*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;friend*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;teacher*mc&#39;</span><span class="p">,</span>
          <span class="s1">&#39;wave3&#39;</span><span class="p">,</span> <span class="s1">&#39;wave4&#39;</span><span class="p">,</span> <span class="s1">&#39;wave5&#39;</span><span class="p">,</span> <span class="s1">&#39;wave6&#39;</span><span class="p">,</span> <span class="s1">&#39;wave7&#39;</span><span class="p">]]</span>
<span class="p">)</span>

<span class="c1"># 고정효과 모델을 사용하여 회귀 모델을 실행</span>
<span class="n">mod</span> <span class="o">=</span> <span class="n">PanelOLS</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;score&#39;</span><span class="p">],</span> <span class="n">X_with_const</span><span class="p">,</span> 
               <span class="n">drop_absorbed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">entity_effects</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fe_results</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">cov_type</span><span class="o">=</span><span class="s1">&#39;clustered&#39;</span><span class="p">,</span> <span class="n">cluster_entity</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># 결과 요약을 출력</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fe_results</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\pilsu\AppData\Local\Temp\ipykernel_34148\2823176699.py:40: AbsorbingEffectWarning: 
Variables have been fully absorbed and have removed from the regression:

mc, male, fa_edu, mo_edu, male*mc, fa_edu*mc, mo_edu*mc

  fe_results = mod.fit(cov_type=&#39;clustered&#39;, cluster_entity=True)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>                          PanelOLS Estimation Summary                           
================================================================================
Dep. Variable:                  score   R-squared:                        0.2688
Estimator:                   PanelOLS   R-squared (Between):              0.2805
No. Observations:               11203   R-squared (Within):               0.2688
Date:                Sat, Feb 22 2025   R-squared (Overall):              0.2748
Time:                        12:13:30   Log-likelihood                   -8221.5
Cov. Estimator:             Clustered                                           
                                        F-statistic:                      132.51
Entities:                        2165   P-value                           0.0000
Avg Obs:                       5.1746   Distribution:                 F(25,9013)
Min Obs:                       1.0000                                           
Max Obs:                       6.0000   F-statistic (robust):             114.99
                                        P-value                           0.0000
Time periods:                       6   Distribution:                 F(25,9013)
Avg Obs:                       1867.2                                           
Min Obs:                       1695.0                                           
Max Obs:                       2012.0                                           
                                                                                
                              Parameter Estimates                               
================================================================================
              Parameter  Std. Err.     T-stat    P-value    Lower CI    Upper CI
--------------------------------------------------------------------------------
const            2.0286     0.1031     19.680     0.0000      1.8265      2.2306
income           0.0127     0.0054     2.3636     0.0181      0.0022      0.0233
par_satis        0.0289     0.0143     2.0166     0.0438      0.0008      0.0570
health           0.0411     0.0144     2.8590     0.0043      0.0129      0.0693
aft_sch          0.0379     0.0072     5.2868     0.0000      0.0239      0.0520
aft_sch1        -0.0009     0.0235    -0.0397     0.9683     -0.0470      0.0451
care             0.0481     0.0150     3.2043     0.0014      0.0187      0.0775
abuse           -0.0125     0.0133    -0.9371     0.3487     -0.0386      0.0136
sch_study        0.2931     0.0179     16.414     0.0000      0.2581      0.3281
friend           0.0918     0.0217     4.2232     0.0000      0.0492      0.1344
teacher          0.0258     0.0143     1.8062     0.0709     -0.0022      0.0537
income*mc       -0.1150     0.0480    -2.3955     0.0166     -0.2090     -0.0209
par_satis*mc     0.0600     0.1231     0.4872     0.6261     -0.1813      0.3013
health*mc        0.1222     0.1038     1.1767     0.2393     -0.0813      0.3257
aft_sch*mc       0.0975     0.0774     1.2593     0.2079     -0.0543      0.2492
aft_sch1*mc      0.0543     0.2131     0.2547     0.7990     -0.3635      0.4721
care*mc         -0.0470     0.1313    -0.3581     0.7203     -0.3044      0.2103
abuse*mc         0.1552     0.1080     1.4381     0.1504     -0.0564      0.3669
sch_study*mc     0.2324     0.1696     1.3702     0.1707     -0.1001      0.5649
friend*mc       -0.2160     0.1693    -1.2763     0.2019     -0.5478      0.1158
teacher*mc       0.0124     0.1039     0.1193     0.9050     -0.1912      0.2160
wave3           -0.0359     0.0156    -2.2923     0.0219     -0.0665     -0.0052
wave4           -0.5490     0.0194    -28.286     0.0000     -0.5870     -0.5109
wave5           -0.5351     0.0204    -26.285     0.0000     -0.5751     -0.4952
wave6           -0.4485     0.0203    -22.128     0.0000     -0.4882     -0.4088
wave7           -0.6178     0.0200    -30.860     0.0000     -0.6571     -0.5786
================================================================================

F-test for Poolability: 4.0878
P-value: 0.0000
Distribution: F(2164,9013)

Included effects: Entity
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p><strong>AbsorbingEffectWarning 이유:(ChatGPT 설명)</strong> 이 경고는 모델에서 특정 변수가 완전히 흡수되어 회귀에서 제거되었다고 알리는 것입니다. ‘male’ 변수가 여기에 해당됩니다. 이는 ‘male’ 변수가 데이터 내 다른 변수와 완벽하게 상관되어 있거나, 모델의 고정 효과나 더미 변수와 완벽하게 상관되어 있어서, 이 변수의 효과를 모델이 구분할 수 없다는 의미입니다. 이런 경우 변수가 회귀에서 어떠한 추가적인 설명력도 제공하지 못하므로 모델에서 제외됩니다.</p></li>
</ul>
</section>
<section id="id12">
<h3>확률효과 모형<a class="headerlink" href="#id12" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">linearmodels.panel</span> <span class="kn">import</span> <span class="n">PooledOLS</span><span class="p">,</span> <span class="n">PanelOLS</span><span class="p">,</span> <span class="n">RandomEffects</span><span class="p">,</span> <span class="n">compare</span>
<span class="kn">from</span> <span class="nn">statsmodels.api</span> <span class="kn">import</span> <span class="n">add_constant</span>

<span class="c1"># ID와 WAVE를 인덱스로 설정</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;WAVE&#39;</span><span class="p">])</span>

<span class="c1"># 상호작용 항</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;male*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;male&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;income*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;income&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;fa_edu*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fa_edu&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;mo_edu*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mo_edu&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;par_satis*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;par_satis&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>

<span class="n">data</span><span class="p">[</span><span class="s1">&#39;health*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;health&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;aft_sch*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;aft_sch&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;aft_sch1*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;aft_sch1&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>

<span class="n">data</span><span class="p">[</span><span class="s1">&#39;care*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;care&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;abuse*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;abuse&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;sch_study*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;sch_study&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;friend*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;friend&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;teacher*mc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;teacher&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mc&#39;</span><span class="p">]</span>

<span class="c1"># X 변수(상수항, 시간 더미 및 상호작용 항)</span>
<span class="n">X_with_const</span> <span class="o">=</span> <span class="n">add_constant</span><span class="p">(</span>
    <span class="n">data</span><span class="p">[[</span><span class="s1">&#39;mc&#39;</span><span class="p">,</span>
          <span class="s1">&#39;male&#39;</span><span class="p">,</span> <span class="s1">&#39;income&#39;</span><span class="p">,</span> <span class="s1">&#39;fa_edu&#39;</span><span class="p">,</span> <span class="s1">&#39;mo_edu&#39;</span><span class="p">,</span> <span class="s1">&#39;par_satis&#39;</span><span class="p">,</span>
          <span class="s1">&#39;health&#39;</span><span class="p">,</span> <span class="s1">&#39;aft_sch&#39;</span><span class="p">,</span> <span class="s1">&#39;aft_sch1&#39;</span><span class="p">,</span> <span class="s1">&#39;care&#39;</span><span class="p">,</span> <span class="s1">&#39;abuse&#39;</span><span class="p">,</span>
          <span class="s1">&#39;sch_study&#39;</span><span class="p">,</span> <span class="s1">&#39;friend&#39;</span><span class="p">,</span> <span class="s1">&#39;teacher&#39;</span><span class="p">,</span>
          <span class="s1">&#39;male*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;income*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;fa_edu*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;mo_edu*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;par_satis*mc&#39;</span><span class="p">,</span>
          <span class="s1">&#39;health*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;aft_sch*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;aft_sch1*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;care*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;abuse*mc&#39;</span><span class="p">,</span>
          <span class="s1">&#39;sch_study*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;friend*mc&#39;</span><span class="p">,</span> <span class="s1">&#39;teacher*mc&#39;</span><span class="p">,</span>
          <span class="s1">&#39;wave3&#39;</span><span class="p">,</span> <span class="s1">&#39;wave4&#39;</span><span class="p">,</span> <span class="s1">&#39;wave5&#39;</span><span class="p">,</span> <span class="s1">&#39;wave6&#39;</span><span class="p">,</span> <span class="s1">&#39;wave7&#39;</span><span class="p">]]</span>
<span class="p">)</span>

<span class="c1"># 확률효과 모델을 사용하여 회귀 모델을 실행</span>
<span class="n">mod</span> <span class="o">=</span> <span class="n">RandomEffects</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;score&#39;</span><span class="p">],</span> <span class="n">X_with_const</span><span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>

<span class="c1"># 결과 요약을 출력</span>
<span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>                        RandomEffects Estimation Summary                        
================================================================================
Dep. Variable:                  score   R-squared:                        0.3367
Estimator:              RandomEffects   R-squared (Between):              0.4158
No. Observations:               11203   R-squared (Within):               0.2592
Date:                Sat, Feb 22 2025   R-squared (Overall):              0.3391
Time:                        12:13:31   Log-likelihood                   -9678.0
Cov. Estimator:            Unadjusted                                           
                                        F-statistic:                      177.20
Entities:                        2165   P-value                           0.0000
Avg Obs:                       5.1746   Distribution:                F(32,11170)
Min Obs:                       1.0000                                           
Max Obs:                       6.0000   F-statistic (robust):             148.57
                                        P-value                           0.0000
Time periods:                       6   Distribution:                F(32,11170)
Avg Obs:                       1867.2                                           
Min Obs:                       1695.0                                           
Max Obs:                       2012.0                                           
                                                                                
                              Parameter Estimates                               
================================================================================
              Parameter  Std. Err.     T-stat    P-value    Lower CI    Upper CI
--------------------------------------------------------------------------------
const            1.2069     0.0869     13.882     0.0000      1.0365      1.3773
mc              -1.4964     0.8052    -1.8584     0.0631     -3.0748      0.0819
male             0.0356     0.0205     1.7314     0.0834     -0.0047      0.0758
income           0.0129     0.0034     3.8459     0.0001      0.0063      0.0195
fa_edu           0.0752     0.0140     5.3735     0.0000      0.0477      0.1026
mo_edu           0.0500     0.0149     3.3586     0.0008      0.0208      0.0792
par_satis        0.0346     0.0132     2.6169     0.0089      0.0087      0.0605
health           0.0256     0.0117     2.1839     0.0290      0.0026      0.0485
aft_sch          0.0555     0.0062     8.9619     0.0000      0.0434      0.0676
aft_sch1         0.0536     0.0197     2.7225     0.0065      0.0150      0.0922
care             0.0659     0.0132     4.9720     0.0000      0.0399      0.0918
abuse           -0.0359     0.0111    -3.2350     0.0012     -0.0576     -0.0141
sch_study        0.4059     0.0133     30.589     0.0000      0.3799      0.4319
friend           0.1159     0.0189     6.1309     0.0000      0.0788      0.1529
teacher          0.0111     0.0122     0.9115     0.3621     -0.0128      0.0350
male*mc          0.3135     0.2040     1.5365     0.1244     -0.0864      0.7134
income*mc        0.0272     0.0453     0.5989     0.5492     -0.0617      0.1160
fa_edu*mc        0.0247     0.1155     0.2141     0.8305     -0.2017      0.2511
mo_edu*mc       -0.0713     0.1227    -0.5813     0.5610     -0.3118      0.1691
par_satis*mc     0.1176     0.1163     1.0113     0.3119     -0.1103      0.3456
health*mc        0.1362     0.1261     1.0808     0.2798     -0.1109      0.3833
aft_sch*mc       0.0522     0.0610     0.8548     0.3927     -0.0675      0.1718
aft_sch1*mc     -0.0271     0.1437    -0.1889     0.8502     -0.3088      0.2545
care*mc          0.0085     0.1124     0.0752     0.9400     -0.2119      0.2288
abuse*mc         0.1160     0.1180     0.9829     0.3257     -0.1153      0.3473
sch_study*mc     0.3429     0.1329     2.5808     0.0099      0.0825      0.6033
friend*mc       -0.2227     0.1785    -1.2471     0.2124     -0.5726      0.1273
teacher*mc      -0.0443     0.1144    -0.3872     0.6986     -0.2686      0.1800
wave3           -0.0345     0.0185    -1.8669     0.0619     -0.0706      0.0017
wave4           -0.5362     0.0190    -28.154     0.0000     -0.5735     -0.4988
wave5           -0.5135     0.0193    -26.547     0.0000     -0.5514     -0.4756
wave6           -0.4296     0.0194    -22.135     0.0000     -0.4676     -0.3916
wave7           -0.5874     0.0201    -29.156     0.0000     -0.6269     -0.5479
================================================================================
</pre></div>
</div>
</div>
</div>
<p><br></br></p>
</section>
</section>
<section id="stata-r">
<h2>부록: Stata 및 R의 추정 결과<a class="headerlink" href="#stata-r" title="Link to this heading">#</a></h2>
<section id="stata">
<h3>(1) Stata<a class="headerlink" href="#stata" title="Link to this heading">#</a></h3>
<p><strong>명령문</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>* 데이터 불러오기
import delimited &quot;C:/1.1 다문화/Data/KCYPS2010 e4[EXCEL]/data2010e4.csv&quot;, clear

* 상호작용항 
gen male_mc = male * mc
gen income_mc = income * mc
gen fa_edu_mc = fa_edu * mc
gen mo_edu_mc = mo_edu * mc
gen par_satis_mc = par_satis * mc
gen health_mc = health * mc
gen aft_sch_mc = aft_sch * mc
gen aft_sch1_mc = aft_sch1 * mc
gen care_mc = care * mc
gen abuse_mc = abuse * mc
gen sch_study_mc = sch_study * mc
gen friend_mc = friend * mc
gen teacher_mc = teacher * mc

* 패널 변수 설정
xtset id wave

* 확률효과 모델
xtreg score mc male income fa_edu mo_edu par_satis health aft_sch aft_sch1 care abuse    sch_study friend teacher male_mc income_mc fa_edu_mc mo_edu_mc par_satis_mc health_mc     aft_sch_mc aft_sch1_mc care_mc abuse_mc sch_study_mc friend_mc teacher_mc wave3 wave4 wave5 wave6 wave7, re
</pre></div>
</div>
<p><strong>추정 결과</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Random-effects GLS regression                   Number of obs     =     11,203
Group variable: id                              Number of groups  =      2,165

R-sq:                                           Obs per group:
     within  = 0.2619                                         min =          1
     between = 0.4439                                         avg =        5.2
     overall = 0.3431                                         max =          6

                                                Wald chi2(32)     =    4753.66
corr(u_i, X)   = 0 (assumed)                    Prob &gt; chi2       =     0.0000

------------------------------------------------------------------------------
       score |      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          mc |  -1.496387   .8052801    -1.86   0.063    -3.074707    .0819329
        male |   .0355497   .0205411     1.73   0.084      -.00471    .0758095
      income |   .0129146    .003358     3.85   0.000     .0063331    .0194962
      fa_edu |   .0751768   .0139928     5.37   0.000     .0477515    .1026022
      mo_edu |   .0499935   .0148884     3.36   0.001     .0208127    .0791743
   par_satis |   .0345744   .0132126     2.62   0.009     .0086783    .0604705
      health |   .0255886   .0117114     2.18   0.029     .0026347    .0485426
     aft_sch |    .055482   .0061919     8.96   0.000     .0433462    .0676179
    aft_sch1 |   .0535757   .0196912     2.72   0.007     .0149816    .0921697
        care |   .0658567   .0132468     4.97   0.000     .0398935    .0918199
       abuse |  -.0358388   .0110823    -3.23   0.001    -.0575596    -.014118
   sch_study |   .4058489   .0132699    30.58   0.000     .3798405    .4318574
      friend |    .115849   .0188975     6.13   0.000     .0788106    .1528874
     teacher |   .0111298   .0121972     0.91   0.362    -.0127763    .0350359
     male_mc |   .3134432   .2040747     1.54   0.125    -.0865359    .7134223
   income_mc |   .0271346   .0453492     0.60   0.550    -.0617483    .1160175
   fa_edu_mc |   .0247642   .1155191     0.21   0.830    -.2016492    .2511776
   mo_edu_mc |  -.0713213   .1227051    -0.58   0.561    -.3118188    .1691762
par_satis_mc |   .1175728   .1162885     1.01   0.312    -.1103485    .3454941
   health_mc |   .1362609   .1260625     1.08   0.280     -.110817    .3833388
  aft_sch_mc |   .0522046   .0610389     0.86   0.392    -.0674294    .1718387
 aft_sch1_mc |  -.0270774   .1436628    -0.19   0.851    -.3086513    .2544965
     care_mc |   .0084355   .1124282     0.08   0.940    -.2119196    .2287907
    abuse_mc |   .1159818    .117991     0.98   0.326    -.1152763      .34724
sch_study_mc |   .3428592   .1328674     2.58   0.010     .0824439    .6032744
   friend_mc |  -.2226195   .1785316    -1.25   0.212    -.5725351     .127296
  teacher_mc |  -.0442967    .114426    -0.39   0.699    -.2685676    .1799743
       wave3 |  -.0344588   .0184558    -1.87   0.062    -.0706315    .0017139
       wave4 |  -.5361757   .0190425   -28.16   0.000    -.5734984    -.498853
       wave5 |  -.5135004    .019341   -26.55   0.000    -.5514081   -.4755928
       wave6 |  -.4296172   .0194068   -22.14   0.000    -.4676539   -.3915805
       wave7 |  -.5874373    .020146   -29.16   0.000    -.6269227   -.5479518
       _cons |   1.207059   .0869396    13.88   0.000      1.03666    1.377457
-------------+----------------------------------------------------------------
     sigma_u |  .38155536
     sigma_e |  .56196381
         rho |  .31553606   (fraction of variance due to u_i)
------------------------------------------------------------------------------
</pre></div>
</div>
</section>
<section id="r">
<h3>(2) R<a class="headerlink" href="#r" title="Link to this heading">#</a></h3>
<p><strong>명령문</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># 참고자료: R Tutorial: Panel Data Analysis 1

# 데이터 불러오기
file_path &lt;- &quot;C:/1.1 다문화/Data/KCYPS2010 e4[EXCEL]/data2010e4.csv&quot;
data &lt;- read.csv(file_path, encoding = &quot;UTF-8&quot;)

library(plm)

# 상호작용항 
male.mc &lt;- data$male * data$mc
income.mc &lt;- data$income * data$mc
fa_edu.mc &lt;- data$fa_edu * data$mc
mo_edu.mc &lt;- data$mo_edu * data$mc
par_satis.mc &lt;- data$par_satis * data$mc
health.mc &lt;- data$health * data$mc
aft_sch.mc &lt;- data$aft_sch * data$mc
aft_sch1.mc &lt;- data$aft_sch1 * data$mc
care.mc &lt;- data$care * data$mc
abuse.mc &lt;- data$abuse * data$mc
sch_study.mc &lt;- data$sch_study * data$mc
friend.mc &lt;- data$friend * data$mc
teacher.mc &lt;- data$teacher * data$mc

# 확률효과 모델
re_model &lt;- plm(score ~ mc
            + male + income + fa_edu + mo_edu + par_satis 
            + health + aft_sch + aft_sch1 + care + abuse 
            + sch_study + friend + teacher
            + male.mc + income.mc + fa_edu.mc + mo_edu.mc + par_satis.mc 
            + health.mc + aft_sch.mc + aft_sch1.mc + care.mc + abuse.mc 
            + sch_study.mc + friend.mc + teacher.mc 
            + wave3 + wave4 + wave5 + wave6 + wave7,
            data = data,
            index = c(&quot;ID&quot;, &quot;WAVE&quot;),
            effect = &quot;individual&quot;, model = &quot;random&quot;)
summary(re_model)
</pre></div>
</div>
<p><strong>추정 결과</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Oneway (individual) effect Random Effect Model 
   (Swamy-Arora&#39;s transformation)

Call:
plm(formula = score ~ mc + male + income + fa_edu + mo_edu + 
    par_satis + health + aft_sch + aft_sch1 + care + abuse + 
    sch_study + friend + teacher + male.mc + income.mc + fa_edu.mc + 
    mo_edu.mc + par_satis.mc + health.mc + aft_sch.mc + aft_sch1.mc + 
    care.mc + abuse.mc + sch_study.mc + friend.mc + teacher.mc + 
    wave3 + wave4 + wave5 + wave6 + wave7, data = data, effect = &quot;individual&quot;, 
    model = &quot;random&quot;, index = c(&quot;ID&quot;, &quot;WAVE&quot;))

Unbalanced Panel: n = 2165, T = 1-6, N = 11203

Effects:
                 var std.dev share
idiosyncratic 0.3161  0.5622 0.678
individual    0.1502  0.3875 0.322
theta:
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
 0.1767  0.4558  0.4904  0.4710  0.4904  0.4904 

Residuals:
    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
-2.59919 -0.36092  0.00190  0.00145  0.36011  2.27130 

Coefficients:
               Estimate Std. Error  z-value  Pr(&gt;|z|)    
(Intercept)   1.1979393  0.0865807  13.8361 &lt; 2.2e-16 ***
mc           -0.1239194  0.0926942  -1.3369  0.181267    
male          0.0374660  0.0206023   1.8185  0.068982 .  
income        0.0131764  0.0033566   3.9256 8.653e-05 ***
fa_edu        0.0767399  0.0139917   5.4847 4.142e-08 ***
mo_edu        0.0480199  0.0148959   3.2237  0.001265 ** 
par_satis     0.0364404  0.0131151   2.7785  0.005461 ** 
health        0.0267369  0.0116609   2.2929  0.021856 *  
aft_sch       0.0556308  0.0061566   9.0360 &lt; 2.2e-16 ***
aft_sch1      0.0534320  0.0195093   2.7388  0.006166 ** 
care          0.0663098  0.0131548   5.0407 4.638e-07 ***
abuse        -0.0349042  0.0110366  -3.1626  0.001564 ** 
sch_study     0.4073023  0.0131982  30.8603 &lt; 2.2e-16 ***
friend        0.1123815  0.0187948   5.9794 2.240e-09 ***
teacher       0.0114165  0.0121226   0.9417  0.346322    
male.mc       0.1855148  0.1285274   1.4434  0.148911    
income.mc     0.0211049  0.0325528   0.6483  0.516772    
fa_edu.mc    -0.0204435  0.0703883  -0.2904  0.771481    
mo_edu.mc     0.0459941  0.0755749   0.6086  0.542797    
par_satis.mc  0.0578572  0.1013236   0.5710  0.567990    
health.mc    -0.0941496  0.1061463  -0.8870  0.375090    
aft_sch.mc    0.0382074  0.0602189   0.6345  0.525771    
aft_sch1.mc  -0.0141860  0.1423909  -0.0996  0.920640    
care.mc      -0.1337953  0.1007345  -1.3282  0.184113    
abuse.mc      0.1375030  0.0940490   1.4620  0.143731    
sch_study.mc  0.1260121  0.1141817   1.1036  0.269762    
friend.mc    -0.0403847  0.1494436  -0.2702  0.786980    
teacher.mc   -0.0648715  0.1111799  -0.5835  0.559568    
wave3        -0.0344796  0.0184223  -1.8716  0.061259 .  
wave4        -0.5359384  0.0190129 -28.1882 &lt; 2.2e-16 ***
wave5        -0.5140416  0.0193094 -26.6214 &lt; 2.2e-16 ***
wave6        -0.4303938  0.0193786 -22.2097 &lt; 2.2e-16 ***
wave7        -0.5874333  0.0201294 -29.1828 &lt; 2.2e-16 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

Total Sum of Squares:    5537.4
Residual Sum of Squares: 3676.4
R-Squared:      0.33616
Adj. R-Squared: 0.33425
Chisq: 4729.48 on 32 DF, p-value: &lt; 2.22e-16
</pre></div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="021_%EB%8B%A4%EB%AC%B8%ED%99%94_%EB%B0%B0%EA%B2%BD%EC%9D%B4_%ED%95%99%EC%97%85%EC%84%B1%EC%A0%81%EC%97%90_%EB%AF%B8%EC%B9%98%EB%8A%94_%EC%98%81%ED%96%A5.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">2.1 다문화 배경이 학업성적에 미치는 영향</p>
      </div>
    </a>
    <a class="right-next"
       href="023_%EC%95%84%EC%B2%AD%ED%8C%A8%EB%84%90%EB%B6%84%EC%84%9D%282010_%EC%A2%85%ED%95%A9%29.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">2.3 아청패널분석(2010 종합)</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">1 데이터</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">다문화청소년 패널 데이터 만들기</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#kcyps2010-4">KCYPS2010 초4 패널 데이터 불러들이기</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">설문조사 항목</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">2 관측 데이터 분석</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">성적 평균 변화 추이</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">성적 평균 변화 추이 그래프 그리기</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">3 패널 회귀분석</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">추정 모형</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">초4 패널 추정 작업</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pooled-ols">통합(pooled) OLS 모형</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">고정효과 모형</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">확률효과 모형</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stata-r">부록: Stata 및 R의 추정 결과</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stata">(1) Stata</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#r">(2) R</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By 최필선 민인식
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>